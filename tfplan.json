{"format_version":"1.2","terraform_version":"1.11.3","variables":{"customer_gateway_ip":{"value":"1.2.3.4"},"db1_host":{"value":"localhost"},"db1_password":{"value":"fake_pass"},"db1_username":{"value":"fake_user"},"db2_host":{"value":"localhost"},"db2_password":{"value":"fake_pass2"},"db2_username":{"value":"fake_user2"},"environment":{"value":"dev"},"glue_crawler_name":{"value":"crawler-db1"},"glue_job_name":{"value":"etl_job"},"staging_bucket_name":{"value":"mvp-staging-bucket"},"tags":{"value":{"Environment":"dev","Terraform":"true"}}},"planned_values":{"outputs":{"bucket_name":{"sensitive":false},"glue_crawler_name":{"sensitive":false,"type":"string","value":"redshift-crawler"},"glue_job_name":{"sensitive":false,"type":"string","value":"redshift-etl"},"logs_kms_key_arn":{"sensitive":false},"redshift_admin_secret_arn":{"sensitive":false},"redshift_endpoint":{"sensitive":false},"redshift_kms_key_arn":{"sensitive":false},"redshift_workgroup_id":{"sensitive":false},"subnet_id":{"sensitive":false},"vpc_id":{"sensitive":false}},"root_module":{"child_modules":[{"resources":[{"address":"module.glue.aws_glue_catalog_database.main","mode":"managed","type":"aws_glue_catalog_database","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":null,"federated_database":[],"name":"catalogo-db","parameters":null,"tags":{"Environment":"dev","Name":"catalogo-db","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"catalogo-db","Terraform":"true"},"target_database":[]},"sensitive_values":{"create_table_default_permission":[],"federated_database":[],"tags":{},"tags_all":{},"target_database":[]}},{"address":"module.glue.aws_glue_connection.db1","mode":"managed","type":"aws_glue_connection","name":"db1","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"connection_type":"JDBC","description":null,"match_criteria":null,"name":"db1-connection","physical_connection_requirements":[{}],"tags":{"Environment":"dev","Name":"db1-connection","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"db1-connection","Terraform":"true"}},"sensitive_values":{"connection_properties":true,"physical_connection_requirements":[{"security_group_id_list":[]}],"tags":{},"tags_all":{}}},{"address":"module.glue.aws_glue_connection.db2","mode":"managed","type":"aws_glue_connection","name":"db2","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"connection_type":"JDBC","description":null,"match_criteria":null,"name":"db2-connection","physical_connection_requirements":[{}],"tags":{"Environment":"dev","Name":"db2-connection","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"db2-connection","Terraform":"true"}},"sensitive_values":{"connection_properties":true,"physical_connection_requirements":[{"security_group_id_list":[]}],"tags":{},"tags_all":{}}},{"address":"module.glue.aws_glue_connection.redshift","mode":"managed","type":"aws_glue_connection","name":"redshift","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"connection_type":"JDBC","description":null,"match_criteria":null,"name":"redshift-connection","physical_connection_requirements":[{}],"tags":{"Environment":"dev","Name":"redshift-connection","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"redshift-connection","Terraform":"true"}},"sensitive_values":{"connection_properties":true,"physical_connection_requirements":[{"security_group_id_list":[]}],"tags":{},"tags_all":{}}},{"address":"module.glue.aws_glue_crawler.main","mode":"managed","type":"aws_glue_crawler","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"catalog_target":[],"classifiers":null,"configuration":null,"database_name":"catalogo-db","delta_target":[],"description":null,"dynamodb_target":[],"hudi_target":[],"iceberg_target":[],"jdbc_target":[],"lake_formation_configuration":[],"lineage_configuration":[],"mongodb_target":[],"name":"redshift-crawler","recrawl_policy":[],"s3_target":[{"connection_name":null,"dlq_event_queue_arn":null,"event_queue_arn":null,"exclusions":null,"path":"s3://mvp-staging-bucket/staging","sample_size":null}],"schedule":null,"schema_change_policy":[],"security_configuration":null,"table_prefix":null,"tags":{"Environment":"dev","Name":"redshift-crawler","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"redshift-crawler","Terraform":"true"}},"sensitive_values":{"catalog_target":[],"delta_target":[],"dynamodb_target":[],"hudi_target":[],"iceberg_target":[],"jdbc_target":[],"lake_formation_configuration":[],"lineage_configuration":[],"mongodb_target":[],"recrawl_policy":[],"s3_target":[{}],"schema_change_policy":[],"tags":{},"tags_all":{}}},{"address":"module.glue.aws_glue_job.main","mode":"managed","type":"aws_glue_job","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"command":[{"name":"glueetl","python_version":"3","script_location":"s3://mvp-staging-bucket/scripts/etl.py"}],"connections":["db1-connection","db2-connection","redshift-connection"],"default_arguments":{"--TempDir":"s3://mvp-staging-bucket/temporary/","--continuous-log-logGroup":"/aws/glue/jobs","--enable-continuous-cloudwatch-log":"true","--enable-job-insights":"true","--enable-metrics":"true","--enable-spark-ui":"true","--job-bookmark-option":"job-bookmark-enable","--job-language":"python","--output_format":"parquet","--output_path":"s3://mvp-staging-bucket/staging","--spark-event-logs-path":"s3://mvp-staging-bucket/spark-logs/"},"description":null,"execution_class":null,"execution_property":[{"max_concurrent_runs":2}],"glue_version":"3.0","job_run_queuing_enabled":null,"maintenance_window":null,"max_retries":3,"name":"redshift-etl","non_overridable_arguments":null,"number_of_workers":2,"security_configuration":null,"source_control_details":[],"tags":{"Environment":"dev","Name":"redshift-etl","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"redshift-etl","Terraform":"true"},"timeout":2880,"worker_type":"G.1X"},"sensitive_values":{"command":[{}],"connections":[false,false,false],"default_arguments":{},"execution_property":[{}],"notification_property":[],"source_control_details":[],"tags":{},"tags_all":{}}},{"address":"module.glue.aws_iam_role.glue_role","mode":"managed","type":"aws_iam_role","name":"glue_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"glue.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"GlueRedshiftRole","path":"/","permissions_boundary":null,"tags":{"Environment":"dev","Terraform":"true"},"tags_all":{"Environment":"dev","Terraform":"true"}},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags":{},"tags_all":{}}},{"address":"module.glue.aws_iam_role_policy.glue_s3_access","mode":"managed","type":"aws_iam_role_policy","name":"glue_s3_access","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"name":"glue-s3-access","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"s3:GetObject\",\"s3:PutObject\",\"s3:DeleteObject\",\"s3:ListBucket\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::mvp-staging-bucket\",\"arn:aws:s3:::mvp-staging-bucket/*\"]}]}"},"sensitive_values":{}},{"address":"module.glue.aws_iam_role_policy_attachment.glue_service","mode":"managed","type":"aws_iam_role_policy_attachment","name":"glue_service","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/service-role/AWSGlueServiceRole","role":"GlueRedshiftRole"},"sensitive_values":{}},{"address":"module.glue.data.aws_secretsmanager_secret_version.db1_credentials","mode":"data","type":"aws_secretsmanager_secret_version","name":"db1_credentials","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"secret_id":"db1-credentials","version_stage":null},"sensitive_values":{"secret_binary":true,"secret_string":true,"version_stages":[]}},{"address":"module.glue.data.aws_secretsmanager_secret_version.db2_credentials","mode":"data","type":"aws_secretsmanager_secret_version","name":"db2_credentials","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"secret_id":"db2-credentials","version_stage":null},"sensitive_values":{"secret_binary":true,"secret_string":true,"version_stages":[]}},{"address":"module.glue.data.aws_subnet.selected","mode":"data","type":"aws_subnet","name":"selected","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"filter":[],"timeouts":null},"sensitive_values":{"filter":[],"tags":{}}}],"address":"module.glue"},{"resources":[{"address":"module.monitoring.aws_cloudwatch_dashboard.main","mode":"managed","type":"aws_cloudwatch_dashboard","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"dashboard_name":"ServerlessInfrastructure"},"sensitive_values":{}},{"address":"module.monitoring.aws_cloudwatch_log_group.glue_logs","mode":"managed","type":"aws_cloudwatch_log_group","name":"glue_logs","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"name":"/aws/glue/jobs","retention_in_days":30,"skip_destroy":false,"tags":{"Environment":"dev","Name":"glue-jobs-logs","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"glue-jobs-logs","Terraform":"true"}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.monitoring.aws_cloudwatch_log_group.vpc_flow_logs","mode":"managed","type":"aws_cloudwatch_log_group","name":"vpc_flow_logs","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"retention_in_days":30,"skip_destroy":false,"tags":{"Environment":"dev","Name":"vpc-flow-logs","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"vpc-flow-logs","Terraform":"true"}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.monitoring.aws_cloudwatch_metric_alarm.redshift_cpu","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"redshift_cpu","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"actions_enabled":true,"alarm_description":"This metric monitors Redshift CPU utilization","alarm_name":"redshift-high-cpu","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":null,"evaluation_periods":2,"extended_statistic":null,"insufficient_data_actions":null,"metric_name":"CPUUtilization","metric_query":[],"namespace":"AWS/RedshiftServerless","period":300,"statistic":"Average","tags":{"Environment":"dev","Name":"redshift-cpu-alarm","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"redshift-cpu-alarm","Terraform":"true"},"threshold":80,"threshold_metric_id":null,"treat_missing_data":"missing","unit":null},"sensitive_values":{"alarm_actions":[],"dimensions":{},"metric_query":[],"ok_actions":[],"tags":{},"tags_all":{}}},{"address":"module.monitoring.aws_cloudwatch_metric_alarm.redshift_storage","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"redshift_storage","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"actions_enabled":true,"alarm_description":"This metric monitors Redshift storage usage","alarm_name":"redshift-storage-usage","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":null,"evaluation_periods":1,"extended_statistic":null,"insufficient_data_actions":null,"metric_name":"StorageUsage","metric_query":[],"namespace":"AWS/RedshiftServerless","period":300,"statistic":"Average","tags":{"Environment":"dev","Name":"redshift-storage-alarm","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"redshift-storage-alarm","Terraform":"true"},"threshold":80,"threshold_metric_id":null,"treat_missing_data":"missing","unit":null},"sensitive_values":{"alarm_actions":[],"dimensions":{},"metric_query":[],"ok_actions":[],"tags":{},"tags_all":{}}},{"address":"module.monitoring.aws_sns_topic.alerts","mode":"managed","type":"aws_sns_topic","name":"alerts","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"application_failure_feedback_role_arn":null,"application_success_feedback_role_arn":null,"application_success_feedback_sample_rate":null,"archive_policy":null,"content_based_deduplication":false,"delivery_policy":null,"display_name":null,"fifo_topic":false,"firehose_failure_feedback_role_arn":null,"firehose_success_feedback_role_arn":null,"firehose_success_feedback_sample_rate":null,"http_failure_feedback_role_arn":null,"http_success_feedback_role_arn":null,"http_success_feedback_sample_rate":null,"lambda_failure_feedback_role_arn":null,"lambda_success_feedback_role_arn":null,"lambda_success_feedback_sample_rate":null,"name":"monitoring-alerts","sqs_failure_feedback_role_arn":null,"sqs_success_feedback_role_arn":null,"sqs_success_feedback_sample_rate":null,"tags":{"Environment":"dev","Name":"monitoring-alerts","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"monitoring-alerts","Terraform":"true"}},"sensitive_values":{"tags":{},"tags_all":{}}}],"address":"module.monitoring"},{"resources":[{"address":"module.networking.aws_cloudwatch_log_group.flow_log_group","mode":"managed","type":"aws_cloudwatch_log_group","name":"flow_log_group","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"kms_key_id":null,"name":"/aws/vpc/flow-log","retention_in_days":30,"skip_destroy":false,"tags":{"Environment":"dev","Name":"vpc-flow-log-group","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"vpc-flow-log-group","Terraform":"true"}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.networking.aws_customer_gateway.main","mode":"managed","type":"aws_customer_gateway","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bgp_asn":"65000","bgp_asn_extended":null,"certificate_arn":null,"device_name":null,"ip_address":"1.2.3.4","tags":{"Environment":"dev","Name":"main-customer-gateway","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"main-customer-gateway","Terraform":"true"},"type":"ipsec.1"},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.networking.aws_flow_log.vpc_flow_log","mode":"managed","type":"aws_flow_log","name":"vpc_flow_log","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"deliver_cross_account_role":null,"destination_options":[],"eni_id":null,"log_destination_type":"cloud-watch-logs","max_aggregation_interval":600,"subnet_id":null,"tags":{"Environment":"dev","Name":"vpc-flow-log","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"vpc-flow-log","Terraform":"true"},"traffic_type":"ALL","transit_gateway_attachment_id":null,"transit_gateway_id":null},"sensitive_values":{"destination_options":[],"tags":{},"tags_all":{}}},{"address":"module.networking.aws_iam_role.vpc_flow_log_role","mode":"managed","type":"aws_iam_role","name":"vpc_flow_log_role","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"vpc-flow-logs.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"vpc-flow-log-role","path":"/","permissions_boundary":null,"tags":{"Environment":"dev","Terraform":"true"},"tags_all":{"Environment":"dev","Terraform":"true"}},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags":{},"tags_all":{}}},{"address":"module.networking.aws_iam_role_policy.vpc_flow_log_policy","mode":"managed","type":"aws_iam_role_policy","name":"vpc_flow_log_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"name":"vpc-flow-log-policy","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"logs:CreateLogGroup\",\"logs:CreateLogStream\",\"logs:PutLogEvents\",\"logs:DescribeLogGroups\",\"logs:DescribeLogStreams\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}"},"sensitive_values":{}},{"address":"module.networking.aws_route_table.main","mode":"managed","type":"aws_route_table","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"route":[{"carrier_gateway_id":"","cidr_block":"172.16.0.0/16","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Environment":"dev","Name":"main-route-table","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"main-route-table","Terraform":"true"},"timeouts":null},"sensitive_values":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}}},{"address":"module.networking.aws_route_table_association.main","mode":"managed","type":"aws_route_table_association","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"gateway_id":null,"timeouts":null},"sensitive_values":{}},{"address":"module.networking.aws_security_group.redshift","mode":"managed","type":"aws_security_group","name":"redshift","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Security group for Redshift Serverless","egress":[{"cidr_blocks":["10.0.0.0/16"],"description":"Allow outbound traffic within VPC","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":[],"description":"Allow Redshift access from Glue","from_port":5439,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","self":false,"to_port":5439}],"name":"redshift-security-group","revoke_rules_on_delete":false,"tags":{"Environment":"dev","Name":"redshift-sg","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"redshift-sg","Terraform":"true"},"timeouts":null},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}},{"address":"module.networking.aws_subnet.main","mode":"managed","type":"aws_subnet","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_ipv6_address_on_creation":false,"availability_zone":"sa-east-1a","cidr_block":"10.0.1.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Environment":"dev","Name":"main-subnet","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"main-subnet","Terraform":"true"},"timeouts":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.networking.aws_vpc.vpc","mode":"managed","type":"aws_vpc","name":"vpc","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"assign_generated_ipv6_cidr_block":null,"cidr_block":"10.0.0.0/16","enable_dns_hostnames":true,"enable_dns_support":true,"instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_ipam_pool_id":null,"ipv6_netmask_length":null,"tags":{"Environment":"dev","Name":"main-vpc","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"main-vpc","Terraform":"true"}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.networking.aws_vpn_connection.main","mode":"managed","type":"aws_vpn_connection","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"static_routes_only":true,"tags":{"Environment":"dev","Name":"main-vpn-connection","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"main-vpn-connection","Terraform":"true"},"transit_gateway_id":null,"transport_transit_gateway_attachment_id":null,"tunnel1_dpd_timeout_action":null,"tunnel1_dpd_timeout_seconds":null,"tunnel1_enable_tunnel_lifecycle_control":null,"tunnel1_ike_versions":null,"tunnel1_phase1_dh_group_numbers":null,"tunnel1_phase1_encryption_algorithms":null,"tunnel1_phase1_integrity_algorithms":null,"tunnel1_phase1_lifetime_seconds":null,"tunnel1_phase2_dh_group_numbers":null,"tunnel1_phase2_encryption_algorithms":null,"tunnel1_phase2_integrity_algorithms":null,"tunnel1_phase2_lifetime_seconds":null,"tunnel1_rekey_fuzz_percentage":null,"tunnel1_rekey_margin_time_seconds":null,"tunnel1_replay_window_size":null,"tunnel1_startup_action":null,"tunnel2_dpd_timeout_action":null,"tunnel2_dpd_timeout_seconds":null,"tunnel2_enable_tunnel_lifecycle_control":null,"tunnel2_ike_versions":null,"tunnel2_phase1_dh_group_numbers":null,"tunnel2_phase1_encryption_algorithms":null,"tunnel2_phase1_integrity_algorithms":null,"tunnel2_phase1_lifetime_seconds":null,"tunnel2_phase2_dh_group_numbers":null,"tunnel2_phase2_encryption_algorithms":null,"tunnel2_phase2_integrity_algorithms":null,"tunnel2_phase2_lifetime_seconds":null,"tunnel2_rekey_fuzz_percentage":null,"tunnel2_rekey_margin_time_seconds":null,"tunnel2_replay_window_size":null,"tunnel2_startup_action":null,"type":"ipsec.1"},"sensitive_values":{"customer_gateway_configuration":true,"routes":[],"tags":{},"tags_all":{},"tunnel1_log_options":[],"tunnel1_preshared_key":true,"tunnel2_log_options":[],"tunnel2_preshared_key":true,"vgw_telemetry":[]}},{"address":"module.networking.aws_vpn_connection_route.db1","mode":"managed","type":"aws_vpn_connection_route","name":"db1","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"destination_cidr_block":"172.16.1.0/24"},"sensitive_values":{}},{"address":"module.networking.aws_vpn_connection_route.db2","mode":"managed","type":"aws_vpn_connection_route","name":"db2","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"destination_cidr_block":"172.16.2.0/24"},"sensitive_values":{}},{"address":"module.networking.aws_vpn_gateway.main","mode":"managed","type":"aws_vpn_gateway","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"availability_zone":null,"tags":{"Environment":"dev","Name":"main-vpn-gateway","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"main-vpn-gateway","Terraform":"true"}},"sensitive_values":{"tags":{},"tags_all":{}}}],"address":"module.networking"},{"resources":[{"address":"module.redshift.aws_redshiftserverless_namespace.main","mode":"managed","type":"aws_redshiftserverless_namespace","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"admin_user_password_wo":null,"admin_user_password_wo_version":null,"db_name":"dev","default_iam_role_arn":null,"log_exports":null,"manage_admin_password":null,"namespace_name":"dwh","tags":{"Environment":"dev","Name":"dwh","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"dwh","Terraform":"true"}},"sensitive_values":{"admin_user_password":true,"admin_username":true,"iam_roles":[],"tags":{},"tags_all":{}}},{"address":"module.redshift.aws_redshiftserverless_snapshot.main","mode":"managed","type":"aws_redshiftserverless_snapshot","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"namespace_name":"dwh","retention_period":7,"snapshot_name":"dwh-snapshot"},"sensitive_values":{"accounts_with_provisioned_restore_access":[],"accounts_with_restore_access":[]}},{"address":"module.redshift.aws_redshiftserverless_workgroup.main","mode":"managed","type":"aws_redshiftserverless_workgroup","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"base_capacity":16,"config_parameter":[{"parameter_key":"enable_user_activity_logging","parameter_value":"true"},{"parameter_key":"max_query_execution_time","parameter_value":"86400000"},{"parameter_key":"max_query_queue_time","parameter_value":"3600000"},{"parameter_key":"query_group","parameter_value":"default"},{"parameter_key":"require_ssl","parameter_value":"true"}],"enhanced_vpc_routing":true,"max_capacity":null,"publicly_accessible":false,"tags":{"Environment":"dev","Terraform":"true"},"tags_all":{"Environment":"dev","Terraform":"true"},"timeouts":null,"workgroup_name":"main-workgroup"},"sensitive_values":{"config_parameter":[{},{},{},{},{}],"endpoint":[],"price_performance_target":[],"security_group_ids":[],"subnet_ids":[],"tags":{},"tags_all":{}}},{"address":"module.redshift.data.aws_secretsmanager_secret_version.admin_credentials","mode":"data","type":"aws_secretsmanager_secret_version","name":"admin_credentials","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"version_stage":null},"sensitive_values":{"secret_binary":true,"secret_string":true,"version_stages":[]}}],"address":"module.redshift"},{"resources":[{"address":"module.security.aws_iam_user.infra_admin","mode":"managed","type":"aws_iam_user","name":"infra_admin","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"force_destroy":false,"name":"infra_admin","path":"/","permissions_boundary":null,"tags":null},"sensitive_values":{"tags_all":{}}},{"address":"module.security.aws_iam_user_policy_attachment.infra_admin_admin_policy","mode":"managed","type":"aws_iam_user_policy_attachment","name":"infra_admin_admin_policy","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"policy_arn":"arn:aws:iam::aws:policy/AdministratorAccess","user":"infra_admin"},"sensitive_values":{}},{"address":"module.security.aws_kms_alias.logs","mode":"managed","type":"aws_kms_alias","name":"logs","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"name":"alias/logs-key"},"sensitive_values":{}},{"address":"module.security.aws_kms_alias.redshift","mode":"managed","type":"aws_kms_alias","name":"redshift","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"name":"alias/redshift-key"},"sensitive_values":{}},{"address":"module.security.aws_kms_key.logs","mode":"managed","type":"aws_kms_key","name":"logs","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bypass_policy_lockout_safety_check":false,"custom_key_store_id":null,"customer_master_key_spec":"SYMMETRIC_DEFAULT","deletion_window_in_days":7,"description":"KMS key for CloudWatch Logs encryption","enable_key_rotation":true,"is_enabled":true,"key_usage":"ENCRYPT_DECRYPT","tags":{"Environment":"dev","Name":"logs-kms-key","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"logs-kms-key","Terraform":"true"},"timeouts":null,"xks_key_id":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.security.aws_kms_key.redshift","mode":"managed","type":"aws_kms_key","name":"redshift","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"bypass_policy_lockout_safety_check":false,"custom_key_store_id":null,"customer_master_key_spec":"SYMMETRIC_DEFAULT","deletion_window_in_days":7,"description":"KMS key for Redshift encryption","enable_key_rotation":true,"is_enabled":true,"key_usage":"ENCRYPT_DECRYPT","tags":{"Environment":"dev","Name":"redshift-kms-key","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"redshift-kms-key","Terraform":"true"},"timeouts":null,"xks_key_id":null},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.security.aws_secretsmanager_secret.db1_credentials","mode":"managed","type":"aws_secretsmanager_secret","name":"db1_credentials","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"Credenciales para la base de datos DB1","force_overwrite_replica_secret":false,"kms_key_id":null,"name":"db1-credentials","recovery_window_in_days":30,"tags":{"Environment":"dev","Terraform":"true"},"tags_all":{"Environment":"dev","Terraform":"true"}},"sensitive_values":{"replica":[],"tags":{},"tags_all":{}}},{"address":"module.security.aws_secretsmanager_secret.db2_credentials","mode":"managed","type":"aws_secretsmanager_secret","name":"db2_credentials","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":"Credenciales para la base de datos DB2","force_overwrite_replica_secret":false,"kms_key_id":null,"name":"db2-credentials","recovery_window_in_days":30,"tags":{"Environment":"dev","Terraform":"true"},"tags_all":{"Environment":"dev","Terraform":"true"}},"sensitive_values":{"replica":[],"tags":{},"tags_all":{}}},{"address":"module.security.aws_secretsmanager_secret.redshift_admin","mode":"managed","type":"aws_secretsmanager_secret","name":"redshift_admin","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"description":null,"force_overwrite_replica_secret":false,"name":"redshift-admin-credentials","recovery_window_in_days":0,"tags":{"Environment":"dev","Name":"redshift-admin-secret","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"redshift-admin-secret","Terraform":"true"}},"sensitive_values":{"replica":[],"tags":{},"tags_all":{}}},{"address":"module.security.aws_secretsmanager_secret_version.db1_credentials","mode":"managed","type":"aws_secretsmanager_secret_version","name":"db1_credentials","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"secret_binary":null,"secret_string":"{\"host\":\"localhost\",\"password\":\"fake_pass\",\"username\":\"fake_user\"}","secret_string_wo":null,"secret_string_wo_version":null},"sensitive_values":{"secret_binary":true,"secret_string":true,"secret_string_wo":true,"version_stages":[]}},{"address":"module.security.aws_secretsmanager_secret_version.db2_credentials","mode":"managed","type":"aws_secretsmanager_secret_version","name":"db2_credentials","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"secret_binary":null,"secret_string":"{\"host\":\"localhost\",\"password\":\"fake_pass2\",\"username\":\"fake_user2\"}","secret_string_wo":null,"secret_string_wo_version":null},"sensitive_values":{"secret_binary":true,"secret_string":true,"secret_string_wo":true,"version_stages":[]}},{"address":"module.security.aws_secretsmanager_secret_version.redshift_admin","mode":"managed","type":"aws_secretsmanager_secret_version","name":"redshift_admin","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"secret_binary":null,"secret_string_wo":null,"secret_string_wo_version":null},"sensitive_values":{"secret_binary":true,"secret_string":true,"secret_string_wo":true,"version_stages":[]}},{"address":"module.security.aws_security_group.glue","mode":"managed","type":"aws_security_group","name":"glue","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"description":"Security group for AWS Glue","egress":[{"cidr_blocks":["10.0.0.0/16"],"description":"Allow outbound traffic to VPC","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["10.0.0.0/16"],"description":"Allow inbound traffic from VPC","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"name":"glue-security-group","revoke_rules_on_delete":false,"tags":{"Environment":"dev","Name":"glue-security-group","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"glue-security-group","Terraform":"true"},"timeouts":null},"sensitive_values":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}},{"address":"module.security.random_password.redshift_password","mode":"managed","type":"random_password","name":"redshift_password","provider_name":"registry.terraform.io/hashicorp/random","schema_version":3,"values":{"keepers":null,"length":16,"lower":true,"min_lower":0,"min_numeric":0,"min_special":0,"min_upper":0,"number":true,"numeric":true,"override_special":"!#$%\u0026*()-_=+[]{}\u003c\u003e:?","special":true,"upper":true},"sensitive_values":{"bcrypt_hash":true,"result":true}}],"address":"module.security"},{"resources":[{"address":"module.staging.aws_cloudwatch_metric_alarm.s3_objects","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"s3_objects","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"actions_enabled":true,"alarm_description":"Alarma cuando el número de objetos en el bucket de staging excede 100,000","alarm_name":"staging-bucket-objects","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":null,"evaluation_periods":1,"extended_statistic":null,"insufficient_data_actions":null,"metric_name":"NumberOfObjects","metric_query":[],"namespace":"AWS/S3","period":86400,"statistic":"Average","tags":{"Environment":"dev","Terraform":"true"},"tags_all":{"Environment":"dev","Terraform":"true"},"threshold":100000,"threshold_metric_id":null,"treat_missing_data":"missing","unit":null},"sensitive_values":{"alarm_actions":[],"dimensions":{},"metric_query":[],"ok_actions":[],"tags":{},"tags_all":{}}},{"address":"module.staging.aws_cloudwatch_metric_alarm.s3_size","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"s3_size","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"actions_enabled":true,"alarm_description":"Alarma cuando el tamaño del bucket de staging excede 10 GB","alarm_name":"staging-bucket-size","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":null,"evaluation_periods":1,"extended_statistic":null,"insufficient_data_actions":null,"metric_name":"BucketSizeBytes","metric_query":[],"namespace":"AWS/S3","period":86400,"statistic":"Average","tags":{"Environment":"dev","Terraform":"true"},"tags_all":{"Environment":"dev","Terraform":"true"},"threshold":10737418240,"threshold_metric_id":null,"treat_missing_data":"missing","unit":null},"sensitive_values":{"alarm_actions":[],"dimensions":{},"metric_query":[],"ok_actions":[],"tags":{},"tags_all":{}}},{"address":"module.staging.aws_iam_role.step_functions","mode":"managed","type":"aws_iam_role","name":"step_functions","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"states.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"step-functions-etl-role","path":"/","permissions_boundary":null,"tags":{"Environment":"dev","Terraform":"true"},"tags_all":{"Environment":"dev","Terraform":"true"}},"sensitive_values":{"inline_policy":[],"managed_policy_arns":[],"tags":{},"tags_all":{}}},{"address":"module.staging.aws_iam_role_policy.step_functions","mode":"managed","type":"aws_iam_role_policy","name":"step_functions","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"name":"step-functions-etl-policy"},"sensitive_values":{}},{"address":"module.staging.aws_s3_bucket.main","mode":"managed","type":"aws_s3_bucket","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"force_destroy":false,"tags":null,"timeouts":null},"sensitive_values":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags_all":{},"versioning":[],"website":[]}},{"address":"module.staging.aws_s3_bucket_lifecycle_configuration.staging","mode":"managed","type":"aws_s3_bucket_lifecycle_configuration","name":"staging","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":1,"values":{"rule":[{"abort_incomplete_multipart_upload":[{"days_after_initiation":7}],"expiration":[{"date":null,"days":30,"expired_object_delete_marker":false}],"filter":[{"and":[],"object_size_greater_than":null,"object_size_less_than":null,"prefix":"staging/","tag":[]}],"id":"retention-policy","noncurrent_version_expiration":[{"newer_noncurrent_versions":null,"noncurrent_days":7}],"noncurrent_version_transition":[],"prefix":"","status":"Enabled","transition":[]}],"timeouts":null,"transition_default_minimum_object_size":"all_storage_classes_128K"},"sensitive_values":{"rule":[{"abort_incomplete_multipart_upload":[{}],"expiration":[{}],"filter":[{"and":[],"tag":[]}],"noncurrent_version_expiration":[{}],"noncurrent_version_transition":[],"transition":[]}]}},{"address":"module.staging.aws_s3_bucket_policy.glue_access","mode":"managed","type":"aws_s3_bucket_policy","name":"glue_access","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"sensitive_values":{}},{"address":"module.staging.aws_s3_bucket_server_side_encryption_configuration.main","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"expected_bucket_owner":null,"rule":[{"apply_server_side_encryption_by_default":[{"sse_algorithm":"aws:kms"}],"bucket_key_enabled":null}]},"sensitive_values":{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}},{"address":"module.staging.aws_s3_bucket_versioning.main","mode":"managed","type":"aws_s3_bucket_versioning","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"expected_bucket_owner":null,"mfa":null,"versioning_configuration":[{"status":"Enabled"}]},"sensitive_values":{"versioning_configuration":[{}]}},{"address":"module.staging.aws_sfn_state_machine.etl_orchestration","mode":"managed","type":"aws_sfn_state_machine","name":"etl_orchestration","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"name":"etl-orchestration","publish":false,"tags":{"Environment":"dev","Terraform":"true"},"tags_all":{"Environment":"dev","Terraform":"true"},"timeouts":null,"type":"STANDARD"},"sensitive_values":{"encryption_configuration":[],"logging_configuration":[],"tags":{},"tags_all":{},"tracing_configuration":[]}},{"address":"module.staging.aws_sns_topic.alerts","mode":"managed","type":"aws_sns_topic","name":"alerts","provider_name":"registry.terraform.io/hashicorp/aws","schema_version":0,"values":{"application_failure_feedback_role_arn":null,"application_success_feedback_role_arn":null,"application_success_feedback_sample_rate":null,"archive_policy":null,"content_based_deduplication":false,"delivery_policy":null,"display_name":null,"fifo_topic":false,"firehose_failure_feedback_role_arn":null,"firehose_success_feedback_role_arn":null,"firehose_success_feedback_sample_rate":null,"http_failure_feedback_role_arn":null,"http_success_feedback_role_arn":null,"http_success_feedback_sample_rate":null,"lambda_failure_feedback_role_arn":null,"lambda_success_feedback_role_arn":null,"lambda_success_feedback_sample_rate":null,"name":"staging-alerts","sqs_failure_feedback_role_arn":null,"sqs_success_feedback_role_arn":null,"sqs_success_feedback_sample_rate":null,"tags":{"Environment":"dev","Terraform":"true"},"tags_all":{"Environment":"dev","Terraform":"true"}},"sensitive_values":{"tags":{},"tags_all":{}}},{"address":"module.staging.random_string.bucket_suffix","mode":"managed","type":"random_string","name":"bucket_suffix","provider_name":"registry.terraform.io/hashicorp/random","schema_version":2,"values":{"keepers":null,"length":8,"lower":true,"min_lower":0,"min_numeric":0,"min_special":0,"min_upper":0,"number":true,"numeric":true,"override_special":null,"special":false,"upper":false},"sensitive_values":{}}],"address":"module.staging"}]}},"resource_changes":[{"address":"module.glue.data.aws_secretsmanager_secret_version.db1_credentials","module_address":"module.glue","mode":"data","type":"aws_secretsmanager_secret_version","name":"db1_credentials","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["read"],"before":null,"after":{"secret_id":"db1-credentials","version_stage":null},"after_unknown":{"arn":true,"created_date":true,"id":true,"secret_binary":true,"secret_string":true,"version_id":true,"version_stages":true},"before_sensitive":false,"after_sensitive":{"secret_binary":true,"secret_string":true,"version_stages":[]}},"action_reason":"read_because_dependency_pending"},{"address":"module.glue.data.aws_secretsmanager_secret_version.db2_credentials","module_address":"module.glue","mode":"data","type":"aws_secretsmanager_secret_version","name":"db2_credentials","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["read"],"before":null,"after":{"secret_id":"db2-credentials","version_stage":null},"after_unknown":{"arn":true,"created_date":true,"id":true,"secret_binary":true,"secret_string":true,"version_id":true,"version_stages":true},"before_sensitive":false,"after_sensitive":{"secret_binary":true,"secret_string":true,"version_stages":[]}},"action_reason":"read_because_dependency_pending"},{"address":"module.glue.data.aws_subnet.selected","module_address":"module.glue","mode":"data","type":"aws_subnet","name":"selected","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["read"],"before":null,"after":{"filter":[],"timeouts":null},"after_unknown":{"arn":true,"assign_ipv6_address_on_creation":true,"availability_zone":true,"availability_zone_id":true,"available_ip_address_count":true,"cidr_block":true,"customer_owned_ipv4_pool":true,"default_for_az":true,"enable_dns64":true,"enable_lni_at_device_index":true,"enable_resource_name_dns_a_record_on_launch":true,"enable_resource_name_dns_aaaa_record_on_launch":true,"filter":[],"id":true,"ipv6_cidr_block":true,"ipv6_cidr_block_association_id":true,"ipv6_native":true,"map_customer_owned_ip_on_launch":true,"map_public_ip_on_launch":true,"outpost_arn":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"state":true,"tags":true,"vpc_id":true},"before_sensitive":false,"after_sensitive":{"filter":[],"tags":{}}},"action_reason":"read_because_config_unknown"},{"address":"module.glue.aws_glue_catalog_database.main","module_address":"module.glue","mode":"managed","type":"aws_glue_catalog_database","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":null,"federated_database":[],"name":"catalogo-db","parameters":null,"tags":{"Environment":"dev","Name":"catalogo-db","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"catalogo-db","Terraform":"true"},"target_database":[]},"after_unknown":{"arn":true,"catalog_id":true,"create_table_default_permission":true,"federated_database":[],"id":true,"location_uri":true,"tags":{},"tags_all":{},"target_database":[]},"before_sensitive":false,"after_sensitive":{"create_table_default_permission":[],"federated_database":[],"tags":{},"tags_all":{},"target_database":[]}}},{"address":"module.glue.aws_glue_connection.db1","module_address":"module.glue","mode":"managed","type":"aws_glue_connection","name":"db1","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"connection_type":"JDBC","description":null,"match_criteria":null,"name":"db1-connection","physical_connection_requirements":[{}],"tags":{"Environment":"dev","Name":"db1-connection","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"db1-connection","Terraform":"true"}},"after_unknown":{"arn":true,"catalog_id":true,"connection_properties":true,"id":true,"physical_connection_requirements":[{"availability_zone":true,"security_group_id_list":true,"subnet_id":true}],"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"connection_properties":true,"physical_connection_requirements":[{"security_group_id_list":[]}],"tags":{},"tags_all":{}}}},{"address":"module.glue.aws_glue_connection.db2","module_address":"module.glue","mode":"managed","type":"aws_glue_connection","name":"db2","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"connection_type":"JDBC","description":null,"match_criteria":null,"name":"db2-connection","physical_connection_requirements":[{}],"tags":{"Environment":"dev","Name":"db2-connection","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"db2-connection","Terraform":"true"}},"after_unknown":{"arn":true,"catalog_id":true,"connection_properties":true,"id":true,"physical_connection_requirements":[{"availability_zone":true,"security_group_id_list":true,"subnet_id":true}],"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"connection_properties":true,"physical_connection_requirements":[{"security_group_id_list":[]}],"tags":{},"tags_all":{}}}},{"address":"module.glue.aws_glue_connection.redshift","module_address":"module.glue","mode":"managed","type":"aws_glue_connection","name":"redshift","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"connection_type":"JDBC","description":null,"match_criteria":null,"name":"redshift-connection","physical_connection_requirements":[{}],"tags":{"Environment":"dev","Name":"redshift-connection","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"redshift-connection","Terraform":"true"}},"after_unknown":{"arn":true,"catalog_id":true,"connection_properties":true,"id":true,"physical_connection_requirements":[{"availability_zone":true,"security_group_id_list":true,"subnet_id":true}],"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"connection_properties":true,"physical_connection_requirements":[{"security_group_id_list":[]}],"tags":{},"tags_all":{}}}},{"address":"module.glue.aws_glue_crawler.main","module_address":"module.glue","mode":"managed","type":"aws_glue_crawler","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"catalog_target":[],"classifiers":null,"configuration":null,"database_name":"catalogo-db","delta_target":[],"description":null,"dynamodb_target":[],"hudi_target":[],"iceberg_target":[],"jdbc_target":[],"lake_formation_configuration":[],"lineage_configuration":[],"mongodb_target":[],"name":"redshift-crawler","recrawl_policy":[],"s3_target":[{"connection_name":null,"dlq_event_queue_arn":null,"event_queue_arn":null,"exclusions":null,"path":"s3://mvp-staging-bucket/staging","sample_size":null}],"schedule":null,"schema_change_policy":[],"security_configuration":null,"table_prefix":null,"tags":{"Environment":"dev","Name":"redshift-crawler","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"redshift-crawler","Terraform":"true"}},"after_unknown":{"arn":true,"catalog_target":[],"delta_target":[],"dynamodb_target":[],"hudi_target":[],"iceberg_target":[],"id":true,"jdbc_target":[],"lake_formation_configuration":[],"lineage_configuration":[],"mongodb_target":[],"recrawl_policy":[],"role":true,"s3_target":[{}],"schema_change_policy":[],"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"catalog_target":[],"delta_target":[],"dynamodb_target":[],"hudi_target":[],"iceberg_target":[],"jdbc_target":[],"lake_formation_configuration":[],"lineage_configuration":[],"mongodb_target":[],"recrawl_policy":[],"s3_target":[{}],"schema_change_policy":[],"tags":{},"tags_all":{}}}},{"address":"module.glue.aws_glue_job.main","module_address":"module.glue","mode":"managed","type":"aws_glue_job","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"command":[{"name":"glueetl","python_version":"3","script_location":"s3://mvp-staging-bucket/scripts/etl.py"}],"connections":["db1-connection","db2-connection","redshift-connection"],"default_arguments":{"--TempDir":"s3://mvp-staging-bucket/temporary/","--continuous-log-logGroup":"/aws/glue/jobs","--enable-continuous-cloudwatch-log":"true","--enable-job-insights":"true","--enable-metrics":"true","--enable-spark-ui":"true","--job-bookmark-option":"job-bookmark-enable","--job-language":"python","--output_format":"parquet","--output_path":"s3://mvp-staging-bucket/staging","--spark-event-logs-path":"s3://mvp-staging-bucket/spark-logs/"},"description":null,"execution_class":null,"execution_property":[{"max_concurrent_runs":2}],"glue_version":"3.0","job_run_queuing_enabled":null,"maintenance_window":null,"max_retries":3,"name":"redshift-etl","non_overridable_arguments":null,"number_of_workers":2,"security_configuration":null,"source_control_details":[],"tags":{"Environment":"dev","Name":"redshift-etl","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"redshift-etl","Terraform":"true"},"timeout":2880,"worker_type":"G.1X"},"after_unknown":{"arn":true,"command":[{"runtime":true}],"connections":[false,false,false],"default_arguments":{},"execution_property":[{}],"id":true,"max_capacity":true,"notification_property":true,"role_arn":true,"source_control_details":[],"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"command":[{}],"connections":[false,false,false],"default_arguments":{},"execution_property":[{}],"notification_property":[],"source_control_details":[],"tags":{},"tags_all":{}}}},{"address":"module.glue.aws_iam_role.glue_role","module_address":"module.glue","mode":"managed","type":"aws_iam_role","name":"glue_role","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"glue.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"GlueRedshiftRole","path":"/","permissions_boundary":null,"tags":{"Environment":"dev","Terraform":"true"},"tags_all":{"Environment":"dev","Terraform":"true"}},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name_prefix":true,"tags":{},"tags_all":{},"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags":{},"tags_all":{}}}},{"address":"module.glue.aws_iam_role_policy.glue_s3_access","module_address":"module.glue","mode":"managed","type":"aws_iam_role_policy","name":"glue_s3_access","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"name":"glue-s3-access","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"s3:GetObject\",\"s3:PutObject\",\"s3:DeleteObject\",\"s3:ListBucket\"],\"Effect\":\"Allow\",\"Resource\":[\"arn:aws:s3:::mvp-staging-bucket\",\"arn:aws:s3:::mvp-staging-bucket/*\"]}]}"},"after_unknown":{"id":true,"name_prefix":true,"role":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.glue.aws_iam_role_policy_attachment.glue_service","module_address":"module.glue","mode":"managed","type":"aws_iam_role_policy_attachment","name":"glue_service","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/service-role/AWSGlueServiceRole","role":"GlueRedshiftRole"},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.monitoring.aws_cloudwatch_dashboard.main","module_address":"module.monitoring","mode":"managed","type":"aws_cloudwatch_dashboard","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"dashboard_name":"ServerlessInfrastructure"},"after_unknown":{"dashboard_arn":true,"dashboard_body":true,"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.monitoring.aws_cloudwatch_log_group.glue_logs","module_address":"module.monitoring","mode":"managed","type":"aws_cloudwatch_log_group","name":"glue_logs","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"name":"/aws/glue/jobs","retention_in_days":30,"skip_destroy":false,"tags":{"Environment":"dev","Name":"glue-jobs-logs","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"glue-jobs-logs","Terraform":"true"}},"after_unknown":{"arn":true,"id":true,"kms_key_id":true,"log_group_class":true,"name_prefix":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.monitoring.aws_cloudwatch_log_group.vpc_flow_logs","module_address":"module.monitoring","mode":"managed","type":"aws_cloudwatch_log_group","name":"vpc_flow_logs","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"retention_in_days":30,"skip_destroy":false,"tags":{"Environment":"dev","Name":"vpc-flow-logs","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"vpc-flow-logs","Terraform":"true"}},"after_unknown":{"arn":true,"id":true,"kms_key_id":true,"log_group_class":true,"name":true,"name_prefix":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.monitoring.aws_cloudwatch_metric_alarm.redshift_cpu","module_address":"module.monitoring","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"redshift_cpu","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"actions_enabled":true,"alarm_description":"This metric monitors Redshift CPU utilization","alarm_name":"redshift-high-cpu","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":null,"evaluation_periods":2,"extended_statistic":null,"insufficient_data_actions":null,"metric_name":"CPUUtilization","metric_query":[],"namespace":"AWS/RedshiftServerless","period":300,"statistic":"Average","tags":{"Environment":"dev","Name":"redshift-cpu-alarm","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"redshift-cpu-alarm","Terraform":"true"},"threshold":80,"threshold_metric_id":null,"treat_missing_data":"missing","unit":null},"after_unknown":{"alarm_actions":true,"arn":true,"dimensions":true,"evaluate_low_sample_count_percentiles":true,"id":true,"metric_query":[],"ok_actions":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"alarm_actions":[],"dimensions":{},"metric_query":[],"ok_actions":[],"tags":{},"tags_all":{}}}},{"address":"module.monitoring.aws_cloudwatch_metric_alarm.redshift_storage","module_address":"module.monitoring","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"redshift_storage","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"actions_enabled":true,"alarm_description":"This metric monitors Redshift storage usage","alarm_name":"redshift-storage-usage","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":null,"evaluation_periods":1,"extended_statistic":null,"insufficient_data_actions":null,"metric_name":"StorageUsage","metric_query":[],"namespace":"AWS/RedshiftServerless","period":300,"statistic":"Average","tags":{"Environment":"dev","Name":"redshift-storage-alarm","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"redshift-storage-alarm","Terraform":"true"},"threshold":80,"threshold_metric_id":null,"treat_missing_data":"missing","unit":null},"after_unknown":{"alarm_actions":true,"arn":true,"dimensions":true,"evaluate_low_sample_count_percentiles":true,"id":true,"metric_query":[],"ok_actions":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"alarm_actions":[],"dimensions":{},"metric_query":[],"ok_actions":[],"tags":{},"tags_all":{}}}},{"address":"module.monitoring.aws_sns_topic.alerts","module_address":"module.monitoring","mode":"managed","type":"aws_sns_topic","name":"alerts","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"application_failure_feedback_role_arn":null,"application_success_feedback_role_arn":null,"application_success_feedback_sample_rate":null,"archive_policy":null,"content_based_deduplication":false,"delivery_policy":null,"display_name":null,"fifo_topic":false,"firehose_failure_feedback_role_arn":null,"firehose_success_feedback_role_arn":null,"firehose_success_feedback_sample_rate":null,"http_failure_feedback_role_arn":null,"http_success_feedback_role_arn":null,"http_success_feedback_sample_rate":null,"lambda_failure_feedback_role_arn":null,"lambda_success_feedback_role_arn":null,"lambda_success_feedback_sample_rate":null,"name":"monitoring-alerts","sqs_failure_feedback_role_arn":null,"sqs_success_feedback_role_arn":null,"sqs_success_feedback_sample_rate":null,"tags":{"Environment":"dev","Name":"monitoring-alerts","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"monitoring-alerts","Terraform":"true"}},"after_unknown":{"arn":true,"beginning_archive_time":true,"id":true,"kms_master_key_id":true,"name_prefix":true,"owner":true,"policy":true,"signature_version":true,"tags":{},"tags_all":{},"tracing_config":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.networking.aws_cloudwatch_log_group.flow_log_group","module_address":"module.networking","mode":"managed","type":"aws_cloudwatch_log_group","name":"flow_log_group","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"kms_key_id":null,"name":"/aws/vpc/flow-log","retention_in_days":30,"skip_destroy":false,"tags":{"Environment":"dev","Name":"vpc-flow-log-group","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"vpc-flow-log-group","Terraform":"true"}},"after_unknown":{"arn":true,"id":true,"log_group_class":true,"name_prefix":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.networking.aws_customer_gateway.main","module_address":"module.networking","mode":"managed","type":"aws_customer_gateway","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"bgp_asn":"65000","bgp_asn_extended":null,"certificate_arn":null,"device_name":null,"ip_address":"1.2.3.4","tags":{"Environment":"dev","Name":"main-customer-gateway","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"main-customer-gateway","Terraform":"true"},"type":"ipsec.1"},"after_unknown":{"arn":true,"id":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.networking.aws_flow_log.vpc_flow_log","module_address":"module.networking","mode":"managed","type":"aws_flow_log","name":"vpc_flow_log","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"deliver_cross_account_role":null,"destination_options":[],"eni_id":null,"log_destination_type":"cloud-watch-logs","max_aggregation_interval":600,"subnet_id":null,"tags":{"Environment":"dev","Name":"vpc-flow-log","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"vpc-flow-log","Terraform":"true"},"traffic_type":"ALL","transit_gateway_attachment_id":null,"transit_gateway_id":null},"after_unknown":{"arn":true,"destination_options":[],"iam_role_arn":true,"id":true,"log_destination":true,"log_format":true,"log_group_name":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"destination_options":[],"tags":{},"tags_all":{}}}},{"address":"module.networking.aws_iam_role.vpc_flow_log_role","module_address":"module.networking","mode":"managed","type":"aws_iam_role","name":"vpc_flow_log_role","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"vpc-flow-logs.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"vpc-flow-log-role","path":"/","permissions_boundary":null,"tags":{"Environment":"dev","Terraform":"true"},"tags_all":{"Environment":"dev","Terraform":"true"}},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name_prefix":true,"tags":{},"tags_all":{},"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags":{},"tags_all":{}}}},{"address":"module.networking.aws_iam_role_policy.vpc_flow_log_policy","module_address":"module.networking","mode":"managed","type":"aws_iam_role_policy","name":"vpc_flow_log_policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"name":"vpc-flow-log-policy","policy":"{\"Version\":\"2012-10-17\",\"Statement\":[{\"Action\":[\"logs:CreateLogGroup\",\"logs:CreateLogStream\",\"logs:PutLogEvents\",\"logs:DescribeLogGroups\",\"logs:DescribeLogStreams\"],\"Effect\":\"Allow\",\"Resource\":\"*\"}]}"},"after_unknown":{"id":true,"name_prefix":true,"role":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.networking.aws_route_table.main","module_address":"module.networking","mode":"managed","type":"aws_route_table","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"route":[{"carrier_gateway_id":"","cidr_block":"172.16.0.0/16","core_network_arn":"","destination_prefix_list_id":"","egress_only_gateway_id":"","ipv6_cidr_block":"","local_gateway_id":"","nat_gateway_id":"","network_interface_id":"","transit_gateway_id":"","vpc_endpoint_id":"","vpc_peering_connection_id":""}],"tags":{"Environment":"dev","Name":"main-route-table","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"main-route-table","Terraform":"true"},"timeouts":null},"after_unknown":{"arn":true,"id":true,"owner_id":true,"propagating_vgws":true,"route":[{"gateway_id":true}],"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"propagating_vgws":[],"route":[{}],"tags":{},"tags_all":{}}}},{"address":"module.networking.aws_route_table_association.main","module_address":"module.networking","mode":"managed","type":"aws_route_table_association","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"gateway_id":null,"timeouts":null},"after_unknown":{"id":true,"route_table_id":true,"subnet_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.networking.aws_security_group.redshift","module_address":"module.networking","mode":"managed","type":"aws_security_group","name":"redshift","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Security group for Redshift Serverless","egress":[{"cidr_blocks":["10.0.0.0/16"],"description":"Allow outbound traffic within VPC","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":[],"description":"Allow Redshift access from Glue","from_port":5439,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"tcp","self":false,"to_port":5439}],"name":"redshift-security-group","revoke_rules_on_delete":false,"tags":{"Environment":"dev","Name":"redshift-sg","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"redshift-sg","Terraform":"true"},"timeouts":null},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"id":true,"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":true}],"name_prefix":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"module.networking.aws_subnet.main","module_address":"module.networking","mode":"managed","type":"aws_subnet","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_ipv6_address_on_creation":false,"availability_zone":"sa-east-1a","cidr_block":"10.0.1.0/24","customer_owned_ipv4_pool":null,"enable_dns64":false,"enable_lni_at_device_index":null,"enable_resource_name_dns_a_record_on_launch":false,"enable_resource_name_dns_aaaa_record_on_launch":false,"ipv6_cidr_block":null,"ipv6_native":false,"map_customer_owned_ip_on_launch":null,"map_public_ip_on_launch":false,"outpost_arn":null,"tags":{"Environment":"dev","Name":"main-subnet","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"main-subnet","Terraform":"true"},"timeouts":null},"after_unknown":{"arn":true,"availability_zone_id":true,"id":true,"ipv6_cidr_block_association_id":true,"owner_id":true,"private_dns_hostname_type_on_launch":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.networking.aws_vpc.vpc","module_address":"module.networking","mode":"managed","type":"aws_vpc","name":"vpc","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assign_generated_ipv6_cidr_block":null,"cidr_block":"10.0.0.0/16","enable_dns_hostnames":true,"enable_dns_support":true,"instance_tenancy":"default","ipv4_ipam_pool_id":null,"ipv4_netmask_length":null,"ipv6_ipam_pool_id":null,"ipv6_netmask_length":null,"tags":{"Environment":"dev","Name":"main-vpc","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"main-vpc","Terraform":"true"}},"after_unknown":{"arn":true,"default_network_acl_id":true,"default_route_table_id":true,"default_security_group_id":true,"dhcp_options_id":true,"enable_network_address_usage_metrics":true,"id":true,"ipv6_association_id":true,"ipv6_cidr_block":true,"ipv6_cidr_block_network_border_group":true,"main_route_table_id":true,"owner_id":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.networking.aws_vpn_connection.main","module_address":"module.networking","mode":"managed","type":"aws_vpn_connection","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"static_routes_only":true,"tags":{"Environment":"dev","Name":"main-vpn-connection","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"main-vpn-connection","Terraform":"true"},"transit_gateway_id":null,"transport_transit_gateway_attachment_id":null,"tunnel1_dpd_timeout_action":null,"tunnel1_dpd_timeout_seconds":null,"tunnel1_enable_tunnel_lifecycle_control":null,"tunnel1_ike_versions":null,"tunnel1_phase1_dh_group_numbers":null,"tunnel1_phase1_encryption_algorithms":null,"tunnel1_phase1_integrity_algorithms":null,"tunnel1_phase1_lifetime_seconds":null,"tunnel1_phase2_dh_group_numbers":null,"tunnel1_phase2_encryption_algorithms":null,"tunnel1_phase2_integrity_algorithms":null,"tunnel1_phase2_lifetime_seconds":null,"tunnel1_rekey_fuzz_percentage":null,"tunnel1_rekey_margin_time_seconds":null,"tunnel1_replay_window_size":null,"tunnel1_startup_action":null,"tunnel2_dpd_timeout_action":null,"tunnel2_dpd_timeout_seconds":null,"tunnel2_enable_tunnel_lifecycle_control":null,"tunnel2_ike_versions":null,"tunnel2_phase1_dh_group_numbers":null,"tunnel2_phase1_encryption_algorithms":null,"tunnel2_phase1_integrity_algorithms":null,"tunnel2_phase1_lifetime_seconds":null,"tunnel2_phase2_dh_group_numbers":null,"tunnel2_phase2_encryption_algorithms":null,"tunnel2_phase2_integrity_algorithms":null,"tunnel2_phase2_lifetime_seconds":null,"tunnel2_rekey_fuzz_percentage":null,"tunnel2_rekey_margin_time_seconds":null,"tunnel2_replay_window_size":null,"tunnel2_startup_action":null,"type":"ipsec.1"},"after_unknown":{"arn":true,"core_network_arn":true,"core_network_attachment_arn":true,"customer_gateway_configuration":true,"customer_gateway_id":true,"enable_acceleration":true,"id":true,"local_ipv4_network_cidr":true,"local_ipv6_network_cidr":true,"outside_ip_address_type":true,"remote_ipv4_network_cidr":true,"remote_ipv6_network_cidr":true,"routes":true,"tags":{},"tags_all":{},"transit_gateway_attachment_id":true,"tunnel1_address":true,"tunnel1_bgp_asn":true,"tunnel1_bgp_holdtime":true,"tunnel1_cgw_inside_address":true,"tunnel1_inside_cidr":true,"tunnel1_inside_ipv6_cidr":true,"tunnel1_log_options":true,"tunnel1_preshared_key":true,"tunnel1_vgw_inside_address":true,"tunnel2_address":true,"tunnel2_bgp_asn":true,"tunnel2_bgp_holdtime":true,"tunnel2_cgw_inside_address":true,"tunnel2_inside_cidr":true,"tunnel2_inside_ipv6_cidr":true,"tunnel2_log_options":true,"tunnel2_preshared_key":true,"tunnel2_vgw_inside_address":true,"tunnel_inside_ip_version":true,"vgw_telemetry":true,"vpn_gateway_id":true},"before_sensitive":false,"after_sensitive":{"customer_gateway_configuration":true,"routes":[],"tags":{},"tags_all":{},"tunnel1_log_options":[],"tunnel1_preshared_key":true,"tunnel2_log_options":[],"tunnel2_preshared_key":true,"vgw_telemetry":[]}}},{"address":"module.networking.aws_vpn_connection_route.db1","module_address":"module.networking","mode":"managed","type":"aws_vpn_connection_route","name":"db1","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"destination_cidr_block":"172.16.1.0/24"},"after_unknown":{"id":true,"vpn_connection_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.networking.aws_vpn_connection_route.db2","module_address":"module.networking","mode":"managed","type":"aws_vpn_connection_route","name":"db2","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"destination_cidr_block":"172.16.2.0/24"},"after_unknown":{"id":true,"vpn_connection_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.networking.aws_vpn_gateway.main","module_address":"module.networking","mode":"managed","type":"aws_vpn_gateway","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"availability_zone":null,"tags":{"Environment":"dev","Name":"main-vpn-gateway","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"main-vpn-gateway","Terraform":"true"}},"after_unknown":{"amazon_side_asn":true,"arn":true,"id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.redshift.data.aws_secretsmanager_secret_version.admin_credentials","module_address":"module.redshift","mode":"data","type":"aws_secretsmanager_secret_version","name":"admin_credentials","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["read"],"before":null,"after":{"version_stage":null},"after_unknown":{"arn":true,"created_date":true,"id":true,"secret_binary":true,"secret_id":true,"secret_string":true,"version_id":true,"version_stages":true},"before_sensitive":false,"after_sensitive":{"secret_binary":true,"secret_string":true,"version_stages":[]}},"action_reason":"read_because_config_unknown"},{"address":"module.redshift.aws_redshiftserverless_namespace.main","module_address":"module.redshift","mode":"managed","type":"aws_redshiftserverless_namespace","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"admin_user_password_wo":null,"admin_user_password_wo_version":null,"db_name":"dev","default_iam_role_arn":null,"log_exports":null,"manage_admin_password":null,"namespace_name":"dwh","tags":{"Environment":"dev","Name":"dwh","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"dwh","Terraform":"true"}},"after_unknown":{"admin_password_secret_arn":true,"admin_password_secret_kms_key_id":true,"admin_user_password":true,"admin_username":true,"arn":true,"iam_roles":true,"id":true,"kms_key_id":true,"namespace_id":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"admin_user_password":true,"admin_username":true,"iam_roles":[],"tags":{},"tags_all":{}}}},{"address":"module.redshift.aws_redshiftserverless_snapshot.main","module_address":"module.redshift","mode":"managed","type":"aws_redshiftserverless_snapshot","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"namespace_name":"dwh","retention_period":7,"snapshot_name":"dwh-snapshot"},"after_unknown":{"accounts_with_provisioned_restore_access":true,"accounts_with_restore_access":true,"admin_username":true,"arn":true,"id":true,"kms_key_id":true,"namespace_arn":true,"owner_account":true},"before_sensitive":false,"after_sensitive":{"accounts_with_provisioned_restore_access":[],"accounts_with_restore_access":[]}}},{"address":"module.redshift.aws_redshiftserverless_workgroup.main","module_address":"module.redshift","mode":"managed","type":"aws_redshiftserverless_workgroup","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"base_capacity":16,"config_parameter":[{"parameter_key":"enable_user_activity_logging","parameter_value":"true"},{"parameter_key":"max_query_execution_time","parameter_value":"86400000"},{"parameter_key":"max_query_queue_time","parameter_value":"3600000"},{"parameter_key":"query_group","parameter_value":"default"},{"parameter_key":"require_ssl","parameter_value":"true"}],"enhanced_vpc_routing":true,"max_capacity":null,"publicly_accessible":false,"tags":{"Environment":"dev","Terraform":"true"},"tags_all":{"Environment":"dev","Terraform":"true"},"timeouts":null,"workgroup_name":"main-workgroup"},"after_unknown":{"arn":true,"config_parameter":[{},{},{},{},{}],"endpoint":true,"id":true,"namespace_name":true,"port":true,"price_performance_target":true,"security_group_ids":true,"subnet_ids":true,"tags":{},"tags_all":{},"workgroup_id":true},"before_sensitive":false,"after_sensitive":{"config_parameter":[{},{},{},{},{}],"endpoint":[],"price_performance_target":[],"security_group_ids":[],"subnet_ids":[],"tags":{},"tags_all":{}}}},{"address":"module.security.aws_iam_user.infra_admin","module_address":"module.security","mode":"managed","type":"aws_iam_user","name":"infra_admin","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"force_destroy":false,"name":"infra_admin","path":"/","permissions_boundary":null,"tags":null},"after_unknown":{"arn":true,"id":true,"tags_all":true,"unique_id":true},"before_sensitive":false,"after_sensitive":{"tags_all":{}}}},{"address":"module.security.aws_iam_user_policy_attachment.infra_admin_admin_policy","module_address":"module.security","mode":"managed","type":"aws_iam_user_policy_attachment","name":"infra_admin_admin_policy","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"policy_arn":"arn:aws:iam::aws:policy/AdministratorAccess","user":"infra_admin"},"after_unknown":{"id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.security.aws_kms_alias.logs","module_address":"module.security","mode":"managed","type":"aws_kms_alias","name":"logs","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"name":"alias/logs-key"},"after_unknown":{"arn":true,"id":true,"name_prefix":true,"target_key_arn":true,"target_key_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.security.aws_kms_alias.redshift","module_address":"module.security","mode":"managed","type":"aws_kms_alias","name":"redshift","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"name":"alias/redshift-key"},"after_unknown":{"arn":true,"id":true,"name_prefix":true,"target_key_arn":true,"target_key_id":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.security.aws_kms_key.logs","module_address":"module.security","mode":"managed","type":"aws_kms_key","name":"logs","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"bypass_policy_lockout_safety_check":false,"custom_key_store_id":null,"customer_master_key_spec":"SYMMETRIC_DEFAULT","deletion_window_in_days":7,"description":"KMS key for CloudWatch Logs encryption","enable_key_rotation":true,"is_enabled":true,"key_usage":"ENCRYPT_DECRYPT","tags":{"Environment":"dev","Name":"logs-kms-key","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"logs-kms-key","Terraform":"true"},"timeouts":null,"xks_key_id":null},"after_unknown":{"arn":true,"id":true,"key_id":true,"multi_region":true,"policy":true,"rotation_period_in_days":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.security.aws_kms_key.redshift","module_address":"module.security","mode":"managed","type":"aws_kms_key","name":"redshift","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"bypass_policy_lockout_safety_check":false,"custom_key_store_id":null,"customer_master_key_spec":"SYMMETRIC_DEFAULT","deletion_window_in_days":7,"description":"KMS key for Redshift encryption","enable_key_rotation":true,"is_enabled":true,"key_usage":"ENCRYPT_DECRYPT","tags":{"Environment":"dev","Name":"redshift-kms-key","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"redshift-kms-key","Terraform":"true"},"timeouts":null,"xks_key_id":null},"after_unknown":{"arn":true,"id":true,"key_id":true,"multi_region":true,"policy":true,"rotation_period_in_days":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.security.aws_secretsmanager_secret.db1_credentials","module_address":"module.security","mode":"managed","type":"aws_secretsmanager_secret","name":"db1_credentials","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Credenciales para la base de datos DB1","force_overwrite_replica_secret":false,"kms_key_id":null,"name":"db1-credentials","recovery_window_in_days":30,"tags":{"Environment":"dev","Terraform":"true"},"tags_all":{"Environment":"dev","Terraform":"true"}},"after_unknown":{"arn":true,"id":true,"name_prefix":true,"policy":true,"replica":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"replica":[],"tags":{},"tags_all":{}}}},{"address":"module.security.aws_secretsmanager_secret.db2_credentials","module_address":"module.security","mode":"managed","type":"aws_secretsmanager_secret","name":"db2_credentials","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Credenciales para la base de datos DB2","force_overwrite_replica_secret":false,"kms_key_id":null,"name":"db2-credentials","recovery_window_in_days":30,"tags":{"Environment":"dev","Terraform":"true"},"tags_all":{"Environment":"dev","Terraform":"true"}},"after_unknown":{"arn":true,"id":true,"name_prefix":true,"policy":true,"replica":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"replica":[],"tags":{},"tags_all":{}}}},{"address":"module.security.aws_secretsmanager_secret.redshift_admin","module_address":"module.security","mode":"managed","type":"aws_secretsmanager_secret","name":"redshift_admin","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":null,"force_overwrite_replica_secret":false,"name":"redshift-admin-credentials","recovery_window_in_days":0,"tags":{"Environment":"dev","Name":"redshift-admin-secret","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"redshift-admin-secret","Terraform":"true"}},"after_unknown":{"arn":true,"id":true,"kms_key_id":true,"name_prefix":true,"policy":true,"replica":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"replica":[],"tags":{},"tags_all":{}}}},{"address":"module.security.aws_secretsmanager_secret_version.db1_credentials","module_address":"module.security","mode":"managed","type":"aws_secretsmanager_secret_version","name":"db1_credentials","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"secret_binary":null,"secret_string":"{\"host\":\"localhost\",\"password\":\"fake_pass\",\"username\":\"fake_user\"}","secret_string_wo":null,"secret_string_wo_version":null},"after_unknown":{"arn":true,"has_secret_string_wo":true,"id":true,"secret_id":true,"version_id":true,"version_stages":true},"before_sensitive":false,"after_sensitive":{"secret_binary":true,"secret_string":true,"secret_string_wo":true,"version_stages":[]}}},{"address":"module.security.aws_secretsmanager_secret_version.db2_credentials","module_address":"module.security","mode":"managed","type":"aws_secretsmanager_secret_version","name":"db2_credentials","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"secret_binary":null,"secret_string":"{\"host\":\"localhost\",\"password\":\"fake_pass2\",\"username\":\"fake_user2\"}","secret_string_wo":null,"secret_string_wo_version":null},"after_unknown":{"arn":true,"has_secret_string_wo":true,"id":true,"secret_id":true,"version_id":true,"version_stages":true},"before_sensitive":false,"after_sensitive":{"secret_binary":true,"secret_string":true,"secret_string_wo":true,"version_stages":[]}}},{"address":"module.security.aws_secretsmanager_secret_version.redshift_admin","module_address":"module.security","mode":"managed","type":"aws_secretsmanager_secret_version","name":"redshift_admin","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"secret_binary":null,"secret_string_wo":null,"secret_string_wo_version":null},"after_unknown":{"arn":true,"has_secret_string_wo":true,"id":true,"secret_id":true,"secret_string":true,"version_id":true,"version_stages":true},"before_sensitive":false,"after_sensitive":{"secret_binary":true,"secret_string":true,"secret_string_wo":true,"version_stages":[]}}},{"address":"module.security.aws_security_group.glue","module_address":"module.security","mode":"managed","type":"aws_security_group","name":"glue","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"description":"Security group for AWS Glue","egress":[{"cidr_blocks":["10.0.0.0/16"],"description":"Allow outbound traffic to VPC","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"ingress":[{"cidr_blocks":["10.0.0.0/16"],"description":"Allow inbound traffic from VPC","from_port":0,"ipv6_cidr_blocks":[],"prefix_list_ids":[],"protocol":"-1","security_groups":[],"self":false,"to_port":0}],"name":"glue-security-group","revoke_rules_on_delete":false,"tags":{"Environment":"dev","Name":"glue-security-group","Terraform":"true"},"tags_all":{"Environment":"dev","Name":"glue-security-group","Terraform":"true"},"timeouts":null},"after_unknown":{"arn":true,"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"id":true,"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"name_prefix":true,"owner_id":true,"tags":{},"tags_all":{},"vpc_id":true},"before_sensitive":false,"after_sensitive":{"egress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"ingress":[{"cidr_blocks":[false],"ipv6_cidr_blocks":[],"prefix_list_ids":[],"security_groups":[]}],"tags":{},"tags_all":{}}}},{"address":"module.security.random_password.redshift_password","module_address":"module.security","mode":"managed","type":"random_password","name":"redshift_password","provider_name":"registry.terraform.io/hashicorp/random","change":{"actions":["create"],"before":null,"after":{"keepers":null,"length":16,"lower":true,"min_lower":0,"min_numeric":0,"min_special":0,"min_upper":0,"number":true,"numeric":true,"override_special":"!#$%\u0026*()-_=+[]{}\u003c\u003e:?","special":true,"upper":true},"after_unknown":{"bcrypt_hash":true,"id":true,"result":true},"before_sensitive":false,"after_sensitive":{"bcrypt_hash":true,"result":true}}},{"address":"module.staging.aws_cloudwatch_metric_alarm.s3_objects","module_address":"module.staging","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"s3_objects","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"actions_enabled":true,"alarm_description":"Alarma cuando el número de objetos en el bucket de staging excede 100,000","alarm_name":"staging-bucket-objects","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":null,"evaluation_periods":1,"extended_statistic":null,"insufficient_data_actions":null,"metric_name":"NumberOfObjects","metric_query":[],"namespace":"AWS/S3","period":86400,"statistic":"Average","tags":{"Environment":"dev","Terraform":"true"},"tags_all":{"Environment":"dev","Terraform":"true"},"threshold":100000,"threshold_metric_id":null,"treat_missing_data":"missing","unit":null},"after_unknown":{"alarm_actions":true,"arn":true,"dimensions":true,"evaluate_low_sample_count_percentiles":true,"id":true,"metric_query":[],"ok_actions":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"alarm_actions":[],"dimensions":{},"metric_query":[],"ok_actions":[],"tags":{},"tags_all":{}}}},{"address":"module.staging.aws_cloudwatch_metric_alarm.s3_size","module_address":"module.staging","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"s3_size","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"actions_enabled":true,"alarm_description":"Alarma cuando el tamaño del bucket de staging excede 10 GB","alarm_name":"staging-bucket-size","comparison_operator":"GreaterThanThreshold","datapoints_to_alarm":null,"evaluation_periods":1,"extended_statistic":null,"insufficient_data_actions":null,"metric_name":"BucketSizeBytes","metric_query":[],"namespace":"AWS/S3","period":86400,"statistic":"Average","tags":{"Environment":"dev","Terraform":"true"},"tags_all":{"Environment":"dev","Terraform":"true"},"threshold":10737418240,"threshold_metric_id":null,"treat_missing_data":"missing","unit":null},"after_unknown":{"alarm_actions":true,"arn":true,"dimensions":true,"evaluate_low_sample_count_percentiles":true,"id":true,"metric_query":[],"ok_actions":true,"tags":{},"tags_all":{}},"before_sensitive":false,"after_sensitive":{"alarm_actions":[],"dimensions":{},"metric_query":[],"ok_actions":[],"tags":{},"tags_all":{}}}},{"address":"module.staging.aws_iam_role.step_functions","module_address":"module.staging","mode":"managed","type":"aws_iam_role","name":"step_functions","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"assume_role_policy":"{\"Statement\":[{\"Action\":\"sts:AssumeRole\",\"Effect\":\"Allow\",\"Principal\":{\"Service\":\"states.amazonaws.com\"}}],\"Version\":\"2012-10-17\"}","description":null,"force_detach_policies":false,"max_session_duration":3600,"name":"step-functions-etl-role","path":"/","permissions_boundary":null,"tags":{"Environment":"dev","Terraform":"true"},"tags_all":{"Environment":"dev","Terraform":"true"}},"after_unknown":{"arn":true,"create_date":true,"id":true,"inline_policy":true,"managed_policy_arns":true,"name_prefix":true,"tags":{},"tags_all":{},"unique_id":true},"before_sensitive":false,"after_sensitive":{"inline_policy":[],"managed_policy_arns":[],"tags":{},"tags_all":{}}}},{"address":"module.staging.aws_iam_role_policy.step_functions","module_address":"module.staging","mode":"managed","type":"aws_iam_role_policy","name":"step_functions","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"name":"step-functions-etl-policy"},"after_unknown":{"id":true,"name_prefix":true,"policy":true,"role":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.staging.aws_s3_bucket.main","module_address":"module.staging","mode":"managed","type":"aws_s3_bucket","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"force_destroy":false,"tags":null,"timeouts":null},"after_unknown":{"acceleration_status":true,"acl":true,"arn":true,"bucket":true,"bucket_domain_name":true,"bucket_prefix":true,"bucket_regional_domain_name":true,"cors_rule":true,"grant":true,"hosted_zone_id":true,"id":true,"lifecycle_rule":true,"logging":true,"object_lock_configuration":true,"object_lock_enabled":true,"policy":true,"region":true,"replication_configuration":true,"request_payer":true,"server_side_encryption_configuration":true,"tags_all":true,"versioning":true,"website":true,"website_domain":true,"website_endpoint":true},"before_sensitive":false,"after_sensitive":{"cors_rule":[],"grant":[],"lifecycle_rule":[],"logging":[],"object_lock_configuration":[],"replication_configuration":[],"server_side_encryption_configuration":[],"tags_all":{},"versioning":[],"website":[]}}},{"address":"module.staging.aws_s3_bucket_lifecycle_configuration.staging","module_address":"module.staging","mode":"managed","type":"aws_s3_bucket_lifecycle_configuration","name":"staging","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"rule":[{"abort_incomplete_multipart_upload":[{"days_after_initiation":7}],"expiration":[{"date":null,"days":30,"expired_object_delete_marker":false}],"filter":[{"and":[],"object_size_greater_than":null,"object_size_less_than":null,"prefix":"staging/","tag":[]}],"id":"retention-policy","noncurrent_version_expiration":[{"newer_noncurrent_versions":null,"noncurrent_days":7}],"noncurrent_version_transition":[],"prefix":"","status":"Enabled","transition":[]}],"timeouts":null,"transition_default_minimum_object_size":"all_storage_classes_128K"},"after_unknown":{"bucket":true,"expected_bucket_owner":true,"id":true,"rule":[{"abort_incomplete_multipart_upload":[{}],"expiration":[{}],"filter":[{"and":[],"tag":[]}],"noncurrent_version_expiration":[{}],"noncurrent_version_transition":[],"transition":[]}]},"before_sensitive":false,"after_sensitive":{"rule":[{"abort_incomplete_multipart_upload":[{}],"expiration":[{}],"filter":[{"and":[],"tag":[]}],"noncurrent_version_expiration":[{}],"noncurrent_version_transition":[],"transition":[]}]}}},{"address":"module.staging.aws_s3_bucket_policy.glue_access","module_address":"module.staging","mode":"managed","type":"aws_s3_bucket_policy","name":"glue_access","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{},"after_unknown":{"bucket":true,"id":true,"policy":true},"before_sensitive":false,"after_sensitive":{}}},{"address":"module.staging.aws_s3_bucket_server_side_encryption_configuration.main","module_address":"module.staging","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"expected_bucket_owner":null,"rule":[{"apply_server_side_encryption_by_default":[{"sse_algorithm":"aws:kms"}],"bucket_key_enabled":null}]},"after_unknown":{"bucket":true,"id":true,"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":true}]}]},"before_sensitive":false,"after_sensitive":{"rule":[{"apply_server_side_encryption_by_default":[{}]}]}}},{"address":"module.staging.aws_s3_bucket_versioning.main","module_address":"module.staging","mode":"managed","type":"aws_s3_bucket_versioning","name":"main","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"expected_bucket_owner":null,"mfa":null,"versioning_configuration":[{"status":"Enabled"}]},"after_unknown":{"bucket":true,"id":true,"versioning_configuration":[{"mfa_delete":true}]},"before_sensitive":false,"after_sensitive":{"versioning_configuration":[{}]}}},{"address":"module.staging.aws_sfn_state_machine.etl_orchestration","module_address":"module.staging","mode":"managed","type":"aws_sfn_state_machine","name":"etl_orchestration","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"name":"etl-orchestration","publish":false,"tags":{"Environment":"dev","Terraform":"true"},"tags_all":{"Environment":"dev","Terraform":"true"},"timeouts":null,"type":"STANDARD"},"after_unknown":{"arn":true,"creation_date":true,"definition":true,"description":true,"encryption_configuration":true,"id":true,"logging_configuration":true,"name_prefix":true,"revision_id":true,"role_arn":true,"state_machine_version_arn":true,"status":true,"tags":{},"tags_all":{},"tracing_configuration":true,"version_description":true},"before_sensitive":false,"after_sensitive":{"encryption_configuration":[],"logging_configuration":[],"tags":{},"tags_all":{},"tracing_configuration":[]}}},{"address":"module.staging.aws_sns_topic.alerts","module_address":"module.staging","mode":"managed","type":"aws_sns_topic","name":"alerts","provider_name":"registry.terraform.io/hashicorp/aws","change":{"actions":["create"],"before":null,"after":{"application_failure_feedback_role_arn":null,"application_success_feedback_role_arn":null,"application_success_feedback_sample_rate":null,"archive_policy":null,"content_based_deduplication":false,"delivery_policy":null,"display_name":null,"fifo_topic":false,"firehose_failure_feedback_role_arn":null,"firehose_success_feedback_role_arn":null,"firehose_success_feedback_sample_rate":null,"http_failure_feedback_role_arn":null,"http_success_feedback_role_arn":null,"http_success_feedback_sample_rate":null,"lambda_failure_feedback_role_arn":null,"lambda_success_feedback_role_arn":null,"lambda_success_feedback_sample_rate":null,"name":"staging-alerts","sqs_failure_feedback_role_arn":null,"sqs_success_feedback_role_arn":null,"sqs_success_feedback_sample_rate":null,"tags":{"Environment":"dev","Terraform":"true"},"tags_all":{"Environment":"dev","Terraform":"true"}},"after_unknown":{"arn":true,"beginning_archive_time":true,"id":true,"kms_master_key_id":true,"name_prefix":true,"owner":true,"policy":true,"signature_version":true,"tags":{},"tags_all":{},"tracing_config":true},"before_sensitive":false,"after_sensitive":{"tags":{},"tags_all":{}}}},{"address":"module.staging.random_string.bucket_suffix","module_address":"module.staging","mode":"managed","type":"random_string","name":"bucket_suffix","provider_name":"registry.terraform.io/hashicorp/random","change":{"actions":["create"],"before":null,"after":{"keepers":null,"length":8,"lower":true,"min_lower":0,"min_numeric":0,"min_special":0,"min_upper":0,"number":true,"numeric":true,"override_special":null,"special":false,"upper":false},"after_unknown":{"id":true,"result":true},"before_sensitive":false,"after_sensitive":{}}}],"output_changes":{"bucket_name":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"glue_crawler_name":{"actions":["create"],"before":null,"after":"redshift-crawler","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"glue_job_name":{"actions":["create"],"before":null,"after":"redshift-etl","after_unknown":false,"before_sensitive":false,"after_sensitive":false},"logs_kms_key_arn":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"redshift_admin_secret_arn":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"redshift_endpoint":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"redshift_kms_key_arn":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"redshift_workgroup_id":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"subnet_id":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false},"vpc_id":{"actions":["create"],"before":null,"after_unknown":true,"before_sensitive":false,"after_sensitive":false}},"prior_state":{"format_version":"1.0","terraform_version":"1.11.3","values":{"outputs":{"glue_crawler_name":{"sensitive":false,"value":"redshift-crawler","type":"string"},"glue_job_name":{"sensitive":false,"value":"redshift-etl","type":"string"}},"root_module":{}}},"configuration":{"provider_config":{"aws":{"name":"aws","full_name":"registry.terraform.io/hashicorp/aws","version_constraint":"~\u003e 5.0","expressions":{"profile":{"constant_value":"vscode-dev"},"region":{"constant_value":"sa-east-1"}}},"module.security:random":{"name":"random","full_name":"registry.terraform.io/hashicorp/random","module_address":"module.security"},"module.staging:random":{"name":"random","full_name":"registry.terraform.io/hashicorp/random","module_address":"module.staging"}},"root_module":{"outputs":{"bucket_name":{"expression":{"references":["module.staging.bucket_name","module.staging"]},"description":"Name of the S3 bucket"},"glue_crawler_name":{"expression":{"references":["module.glue.glue_crawler_name","module.glue"]},"description":"Name of the Glue crawler"},"glue_job_name":{"expression":{"references":["module.glue.glue_job_name","module.glue"]},"description":"Name of the Glue job"},"logs_kms_key_arn":{"expression":{"references":["module.security.logs_kms_key_arn","module.security"]},"description":"ARN of the KMS key for logs"},"redshift_admin_secret_arn":{"expression":{"references":["module.security.redshift_admin_secret_arn","module.security"]},"description":"ARN of the Redshift admin secret"},"redshift_endpoint":{"expression":{"references":["module.redshift.redshift_endpoint","module.redshift"]},"description":"Endpoint of the Redshift cluster"},"redshift_kms_key_arn":{"expression":{"references":["module.security.redshift_kms_key_arn","module.security"]},"description":"ARN of the KMS key for Redshift"},"redshift_workgroup_id":{"expression":{"references":["module.redshift.workgroup_id","module.redshift"]},"description":"ID of the Redshift workgroup"},"subnet_id":{"expression":{"references":["module.networking.subnet_id","module.networking"]},"description":"ID of the subnet"},"vpc_id":{"expression":{"references":["module.networking.vpc_id","module.networking"]},"description":"ID of the VPC"}},"module_calls":{"glue":{"source":"./glue","expressions":{"database_name":{"constant_value":"catalogo-db"},"glue_crawler_name":{"references":["var.glue_crawler_name"]},"glue_job_name":{"references":["var.glue_job_name"]},"redshift_connection_string":{"references":["module.redshift.redshift_endpoint","module.redshift"]},"security_group_id":{"references":["module.security.glue_security_group_id","module.security"]},"staging_bucket":{"references":["var.staging_bucket_name"]},"subnet_id":{"references":["module.networking.subnet_id","module.networking"]},"tags":{"references":["var.tags"]}},"module":{"outputs":{"catalog_database_name":{"expression":{"references":["aws_glue_catalog_database.main.name","aws_glue_catalog_database.main"]},"description":"Name of the Glue catalog database"},"glue_crawler_name":{"expression":{"references":["aws_glue_crawler.main.name","aws_glue_crawler.main"]}},"glue_job_name":{"expression":{"references":["aws_glue_job.main.name","aws_glue_job.main"]}},"glue_role_arn":{"expression":{"references":["aws_iam_role.glue_role.arn","aws_iam_role.glue_role"]},"description":"ARN of the IAM role used by Glue"}},"resources":[{"address":"aws_glue_catalog_database.main","mode":"managed","type":"aws_glue_catalog_database","name":"main","provider_config_key":"aws","expressions":{"name":{"references":["var.database_name"]},"tags":{"references":["var.tags","var.database_name"]}},"schema_version":0},{"address":"aws_glue_connection.db1","mode":"managed","type":"aws_glue_connection","name":"db1","provider_config_key":"aws","expressions":{"connection_properties":{"references":["local.db1_credentials.host","local.db1_credentials","local.db1_credentials.username","local.db1_credentials","local.db1_credentials.password","local.db1_credentials"]},"connection_type":{"constant_value":"JDBC"},"name":{"constant_value":"db1-connection"},"physical_connection_requirements":[{"availability_zone":{"references":["data.aws_subnet.selected.availability_zone","data.aws_subnet.selected"]},"security_group_id_list":{"references":["var.security_group_id"]},"subnet_id":{"references":["var.subnet_id"]}}],"tags":{"references":["var.tags"]}},"schema_version":0},{"address":"aws_glue_connection.db2","mode":"managed","type":"aws_glue_connection","name":"db2","provider_config_key":"aws","expressions":{"connection_properties":{"references":["local.db2_credentials.host","local.db2_credentials","local.db2_credentials.username","local.db2_credentials","local.db2_credentials.password","local.db2_credentials"]},"connection_type":{"constant_value":"JDBC"},"name":{"constant_value":"db2-connection"},"physical_connection_requirements":[{"availability_zone":{"references":["data.aws_subnet.selected.availability_zone","data.aws_subnet.selected"]},"security_group_id_list":{"references":["var.security_group_id"]},"subnet_id":{"references":["var.subnet_id"]}}],"tags":{"references":["var.tags"]}},"schema_version":0},{"address":"aws_glue_connection.redshift","mode":"managed","type":"aws_glue_connection","name":"redshift","provider_config_key":"aws","expressions":{"connection_properties":{"references":["var.redshift_connection_string"]},"name":{"constant_value":"redshift-connection"},"physical_connection_requirements":[{"availability_zone":{"references":["data.aws_subnet.selected.availability_zone","data.aws_subnet.selected"]},"security_group_id_list":{"references":["var.security_group_id"]},"subnet_id":{"references":["var.subnet_id"]}}],"tags":{"references":["var.tags"]}},"schema_version":0},{"address":"aws_glue_crawler.main","mode":"managed","type":"aws_glue_crawler","name":"main","provider_config_key":"aws","expressions":{"database_name":{"references":["aws_glue_catalog_database.main.name","aws_glue_catalog_database.main"]},"name":{"constant_value":"redshift-crawler"},"role":{"references":["aws_iam_role.glue_role.arn","aws_iam_role.glue_role"]},"s3_target":[{"path":{"references":["var.staging_bucket"]}}],"tags":{"references":["var.tags"]}},"schema_version":0},{"address":"aws_glue_job.main","mode":"managed","type":"aws_glue_job","name":"main","provider_config_key":"aws","expressions":{"command":[{"python_version":{"constant_value":"3"},"script_location":{"references":["var.staging_bucket"]}}],"connections":{"references":["aws_glue_connection.db1.name","aws_glue_connection.db1","aws_glue_connection.db2.name","aws_glue_connection.db2","aws_glue_connection.redshift.name","aws_glue_connection.redshift"]},"default_arguments":{"references":["var.staging_bucket","var.staging_bucket","var.staging_bucket"]},"execution_property":[{"max_concurrent_runs":{"constant_value":2}}],"glue_version":{"constant_value":"3.0"},"max_retries":{"constant_value":3},"name":{"constant_value":"redshift-etl"},"number_of_workers":{"constant_value":2},"role_arn":{"references":["aws_iam_role.glue_role.arn","aws_iam_role.glue_role"]},"tags":{"references":["var.tags"]},"timeout":{"constant_value":2880},"worker_type":{"constant_value":"G.1X"}},"schema_version":0},{"address":"aws_iam_role.glue_role","mode":"managed","type":"aws_iam_role","name":"glue_role","provider_config_key":"aws","expressions":{"assume_role_policy":{},"name":{"constant_value":"GlueRedshiftRole"},"tags":{"references":["var.tags"]}},"schema_version":0},{"address":"aws_iam_role_policy.glue_s3_access","mode":"managed","type":"aws_iam_role_policy","name":"glue_s3_access","provider_config_key":"aws","expressions":{"name":{"constant_value":"glue-s3-access"},"policy":{"references":["var.staging_bucket","var.staging_bucket"]},"role":{"references":["aws_iam_role.glue_role.id","aws_iam_role.glue_role"]}},"schema_version":0},{"address":"aws_iam_role_policy_attachment.glue_service","mode":"managed","type":"aws_iam_role_policy_attachment","name":"glue_service","provider_config_key":"aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/service-role/AWSGlueServiceRole"},"role":{"references":["aws_iam_role.glue_role.name","aws_iam_role.glue_role"]}},"schema_version":0},{"address":"data.aws_secretsmanager_secret_version.db1_credentials","mode":"data","type":"aws_secretsmanager_secret_version","name":"db1_credentials","provider_config_key":"aws","expressions":{"secret_id":{"constant_value":"db1-credentials"}},"schema_version":0},{"address":"data.aws_secretsmanager_secret_version.db2_credentials","mode":"data","type":"aws_secretsmanager_secret_version","name":"db2_credentials","provider_config_key":"aws","expressions":{"secret_id":{"constant_value":"db2-credentials"}},"schema_version":0},{"address":"data.aws_subnet.selected","mode":"data","type":"aws_subnet","name":"selected","provider_config_key":"aws","expressions":{"id":{"references":["var.subnet_id"]}},"schema_version":0}],"variables":{"database_name":{"description":"Nombre de la base de datos de Glue"},"glue_crawler_name":{},"glue_job_name":{},"redshift_connection_string":{"description":"Cadena de conexión para Redshift"},"security_group_id":{"description":"ID del grupo de seguridad para las conexiones de Glue"},"staging_bucket":{"description":"Nombre del bucket de staging"},"subnet_id":{"description":"ID de la subred para las conexiones de Glue"},"tags":{"description":"Tags comunes para todos los recursos"}}},"depends_on":["module.redshift"]},"monitoring":{"source":"./monitoring","expressions":{"kms_key_arn":{"references":["module.security.logs_kms_key_arn","module.security"]},"redshift_workgroup_id":{"references":["module.redshift.workgroup_id","module.redshift"]},"tags":{"references":["var.tags"]},"vpc_id":{"references":["module.networking.vpc_id","module.networking"]}},"module":{"outputs":{"dashboard_name":{"expression":{"references":["aws_cloudwatch_dashboard.main.dashboard_name","aws_cloudwatch_dashboard.main"]},"description":"Name of the CloudWatch dashboard"},"glue_log_group_name":{"expression":{"references":["aws_cloudwatch_log_group.glue_logs.name","aws_cloudwatch_log_group.glue_logs"]},"description":"Name of the Glue jobs CloudWatch log group"},"sns_topic_arn":{"expression":{"references":["aws_sns_topic.alerts.arn","aws_sns_topic.alerts"]},"description":"ARN of the SNS topic for monitoring alerts"},"vpc_flow_log_group_name":{"expression":{"references":["aws_cloudwatch_log_group.vpc_flow_logs.name","aws_cloudwatch_log_group.vpc_flow_logs"]},"description":"Name of the VPC Flow Logs CloudWatch log group"}},"resources":[{"address":"aws_cloudwatch_dashboard.main","mode":"managed","type":"aws_cloudwatch_dashboard","name":"main","provider_config_key":"aws","expressions":{"dashboard_body":{"references":["var.redshift_workgroup_id","var.redshift_workgroup_id"]},"dashboard_name":{"constant_value":"ServerlessInfrastructure"}},"schema_version":0},{"address":"aws_cloudwatch_log_group.glue_logs","mode":"managed","type":"aws_cloudwatch_log_group","name":"glue_logs","provider_config_key":"aws","expressions":{"kms_key_id":{"references":["var.kms_key_arn"]},"name":{"constant_value":"/aws/glue/jobs"},"retention_in_days":{"references":["var.log_retention_days"]},"tags":{"references":["var.tags"]}},"schema_version":0},{"address":"aws_cloudwatch_log_group.vpc_flow_logs","mode":"managed","type":"aws_cloudwatch_log_group","name":"vpc_flow_logs","provider_config_key":"aws","expressions":{"kms_key_id":{"references":["var.kms_key_arn"]},"name":{"references":["var.vpc_id"]},"retention_in_days":{"references":["var.log_retention_days"]},"tags":{"references":["var.tags"]}},"schema_version":0},{"address":"aws_cloudwatch_metric_alarm.redshift_cpu","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"redshift_cpu","provider_config_key":"aws","expressions":{"alarm_actions":{"references":["aws_sns_topic.alerts.arn","aws_sns_topic.alerts"]},"alarm_description":{"constant_value":"This metric monitors Redshift CPU utilization"},"alarm_name":{"constant_value":"redshift-high-cpu"},"comparison_operator":{"constant_value":"GreaterThanThreshold"},"dimensions":{"references":["var.redshift_workgroup_id"]},"evaluation_periods":{"constant_value":"2"},"metric_name":{"constant_value":"CPUUtilization"},"namespace":{"constant_value":"AWS/RedshiftServerless"},"ok_actions":{"references":["aws_sns_topic.alerts.arn","aws_sns_topic.alerts"]},"period":{"constant_value":"300"},"statistic":{"constant_value":"Average"},"tags":{"references":["var.tags"]},"threshold":{"references":["var.cpu_threshold_percent"]}},"schema_version":1},{"address":"aws_cloudwatch_metric_alarm.redshift_storage","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"redshift_storage","provider_config_key":"aws","expressions":{"alarm_actions":{"references":["aws_sns_topic.alerts.arn","aws_sns_topic.alerts"]},"alarm_description":{"constant_value":"This metric monitors Redshift storage usage"},"alarm_name":{"constant_value":"redshift-storage-usage"},"comparison_operator":{"constant_value":"GreaterThanThreshold"},"dimensions":{"references":["var.redshift_workgroup_id"]},"evaluation_periods":{"constant_value":"1"},"metric_name":{"constant_value":"StorageUsage"},"namespace":{"constant_value":"AWS/RedshiftServerless"},"ok_actions":{"references":["aws_sns_topic.alerts.arn","aws_sns_topic.alerts"]},"period":{"constant_value":"300"},"statistic":{"constant_value":"Average"},"tags":{"references":["var.tags"]},"threshold":{"constant_value":80}},"schema_version":1},{"address":"aws_sns_topic.alerts","mode":"managed","type":"aws_sns_topic","name":"alerts","provider_config_key":"aws","expressions":{"kms_master_key_id":{"references":["var.kms_key_arn"]},"name":{"constant_value":"monitoring-alerts"},"tags":{"references":["var.tags"]}},"schema_version":0}],"variables":{"cpu_threshold_percent":{"default":80,"description":"CPU utilization threshold for Redshift alarm"},"kms_key_arn":{"description":"ARN of KMS key for CloudWatch logs encryption"},"log_retention_days":{"default":30,"description":"Number of days to retain CloudWatch logs"},"redshift_workgroup_id":{"description":"ID of the Redshift Serverless workgroup"},"tags":{"description":"Default tags to apply to all resources."},"vpc_id":{"description":"ID of the VPC"}}},"depends_on":["module.redshift","module.networking"]},"networking":{"source":"./networking","expressions":{"customer_gateway_ip":{"references":["var.customer_gateway_ip"]},"glue_security_group_id":{"references":["module.security.glue_security_group_id","module.security"]},"tags":{"references":["var.tags"]}},"module":{"outputs":{"redshift_security_group_id":{"expression":{"references":["aws_security_group.redshift.id","aws_security_group.redshift"]},"description":"ID of the Redshift security group"},"subnet_id":{"expression":{"references":["aws_subnet.main.id","aws_subnet.main"]},"description":"ID of the main subnet"},"vpc_id":{"expression":{"references":["aws_vpc.vpc.id","aws_vpc.vpc"]},"description":"ID of the VPC"}},"resources":[{"address":"aws_cloudwatch_log_group.flow_log_group","mode":"managed","type":"aws_cloudwatch_log_group","name":"flow_log_group","provider_config_key":"aws","expressions":{"name":{"constant_value":"/aws/vpc/flow-log"},"retention_in_days":{"constant_value":30},"tags":{"references":["var.tags"]}},"schema_version":0},{"address":"aws_customer_gateway.main","mode":"managed","type":"aws_customer_gateway","name":"main","provider_config_key":"aws","expressions":{"bgp_asn":{"constant_value":65000},"ip_address":{"references":["var.customer_gateway_ip"]},"tags":{"references":["var.tags"]},"type":{"constant_value":"ipsec.1"}},"schema_version":0},{"address":"aws_flow_log.vpc_flow_log","mode":"managed","type":"aws_flow_log","name":"vpc_flow_log","provider_config_key":"aws","expressions":{"iam_role_arn":{"references":["aws_iam_role.vpc_flow_log_role.arn","aws_iam_role.vpc_flow_log_role"]},"log_destination":{"references":["aws_cloudwatch_log_group.flow_log_group.arn","aws_cloudwatch_log_group.flow_log_group"]},"tags":{"references":["var.tags"]},"traffic_type":{"constant_value":"ALL"},"vpc_id":{"references":["aws_vpc.vpc.id","aws_vpc.vpc"]}},"schema_version":0},{"address":"aws_iam_role.vpc_flow_log_role","mode":"managed","type":"aws_iam_role","name":"vpc_flow_log_role","provider_config_key":"aws","expressions":{"assume_role_policy":{},"name":{"constant_value":"vpc-flow-log-role"},"tags":{"references":["var.tags"]}},"schema_version":0},{"address":"aws_iam_role_policy.vpc_flow_log_policy","mode":"managed","type":"aws_iam_role_policy","name":"vpc_flow_log_policy","provider_config_key":"aws","expressions":{"name":{"constant_value":"vpc-flow-log-policy"},"policy":{},"role":{"references":["aws_iam_role.vpc_flow_log_role.id","aws_iam_role.vpc_flow_log_role"]}},"schema_version":0},{"address":"aws_route_table.main","mode":"managed","type":"aws_route_table","name":"main","provider_config_key":"aws","expressions":{"route":{"references":["aws_vpn_gateway.main.id","aws_vpn_gateway.main"]},"tags":{"references":["var.tags"]},"vpc_id":{"references":["aws_vpc.vpc.id","aws_vpc.vpc"]}},"schema_version":0},{"address":"aws_route_table_association.main","mode":"managed","type":"aws_route_table_association","name":"main","provider_config_key":"aws","expressions":{"route_table_id":{"references":["aws_route_table.main.id","aws_route_table.main"]},"subnet_id":{"references":["aws_subnet.main.id","aws_subnet.main"]}},"schema_version":0},{"address":"aws_security_group.redshift","mode":"managed","type":"aws_security_group","name":"redshift","provider_config_key":"aws","expressions":{"description":{"constant_value":"Security group for Redshift Serverless"},"egress":{"references":["var.vpc_cidr"]},"ingress":{"references":["var.glue_security_group_id"]},"name":{"constant_value":"redshift-security-group"},"tags":{"references":["var.tags"]},"vpc_id":{"references":["aws_vpc.vpc.id","aws_vpc.vpc"]}},"schema_version":1},{"address":"aws_subnet.main","mode":"managed","type":"aws_subnet","name":"main","provider_config_key":"aws","expressions":{"availability_zone":{"references":["var.availability_zone"]},"cidr_block":{"references":["var.subnet_cidr"]},"tags":{"references":["var.tags"]},"vpc_id":{"references":["aws_vpc.vpc.id","aws_vpc.vpc"]}},"schema_version":1},{"address":"aws_vpc.vpc","mode":"managed","type":"aws_vpc","name":"vpc","provider_config_key":"aws","expressions":{"cidr_block":{"references":["var.vpc_cidr"]},"enable_dns_hostnames":{"constant_value":true},"enable_dns_support":{"constant_value":true},"tags":{"references":["var.tags"]}},"schema_version":1},{"address":"aws_vpn_connection.main","mode":"managed","type":"aws_vpn_connection","name":"main","provider_config_key":"aws","expressions":{"customer_gateway_id":{"references":["aws_customer_gateway.main.id","aws_customer_gateway.main"]},"static_routes_only":{"constant_value":true},"tags":{"references":["var.tags"]},"type":{"constant_value":"ipsec.1"},"vpn_gateway_id":{"references":["aws_vpn_gateway.main.id","aws_vpn_gateway.main"]}},"schema_version":0},{"address":"aws_vpn_connection_route.db1","mode":"managed","type":"aws_vpn_connection_route","name":"db1","provider_config_key":"aws","expressions":{"destination_cidr_block":{"constant_value":"172.16.1.0/24"},"vpn_connection_id":{"references":["aws_vpn_connection.main.id","aws_vpn_connection.main"]}},"schema_version":0},{"address":"aws_vpn_connection_route.db2","mode":"managed","type":"aws_vpn_connection_route","name":"db2","provider_config_key":"aws","expressions":{"destination_cidr_block":{"constant_value":"172.16.2.0/24"},"vpn_connection_id":{"references":["aws_vpn_connection.main.id","aws_vpn_connection.main"]}},"schema_version":0},{"address":"aws_vpn_gateway.main","mode":"managed","type":"aws_vpn_gateway","name":"main","provider_config_key":"aws","expressions":{"tags":{"references":["var.tags"]},"vpc_id":{"references":["aws_vpc.vpc.id","aws_vpc.vpc"]}},"schema_version":0}],"variables":{"availability_zone":{"default":"sa-east-1a","description":"Availability zone for resources"},"customer_gateway_ip":{"description":"IP address of the customer gateway (on-premise)"},"glue_security_group_id":{"description":"ID of the Glue security group"},"subnet_cidr":{"default":"10.0.1.0/24","description":"CIDR block for subnet"},"tags":{"description":"Default tags to apply to all resources."},"vpc_cidr":{"default":"10.0.0.0/16","description":"CIDR block for VPC"}}}},"redshift":{"source":"./redshift","expressions":{"admin_secret_arn":{"references":["module.security.redshift_admin_secret_arn","module.security"]},"kms_key_arn":{"references":["module.security.logs_kms_key_arn","module.security"]},"security_group_id":{"references":["module.networking.redshift_security_group_id","module.networking"]},"subnet_id":{"references":["module.networking.subnet_id","module.networking"]},"tags":{"references":["var.tags"]}},"module":{"outputs":{"namespace_id":{"expression":{"references":["aws_redshiftserverless_namespace.main.id","aws_redshiftserverless_namespace.main"]},"description":"ID del namespace de Redshift Serverless"},"redshift_endpoint":{"expression":{"references":["aws_redshiftserverless_workgroup.main.endpoint","aws_redshiftserverless_workgroup.main"]},"description":"Endpoint de Redshift Serverless"},"workgroup_id":{"expression":{"references":["aws_redshiftserverless_workgroup.main.id","aws_redshiftserverless_workgroup.main"]},"description":"ID del workgroup de Redshift Serverless"}},"resources":[{"address":"aws_redshiftserverless_namespace.main","mode":"managed","type":"aws_redshiftserverless_namespace","name":"main","provider_config_key":"aws","expressions":{"admin_user_password":{"references":["local.admin_credentials.password","local.admin_credentials"]},"admin_username":{"references":["local.admin_credentials.username","local.admin_credentials"]},"db_name":{"constant_value":"dev"},"kms_key_id":{"references":["var.kms_key_arn"]},"namespace_name":{"references":["var.namespace_name"]},"tags":{"references":["var.tags","var.namespace_name"]}},"schema_version":0},{"address":"aws_redshiftserverless_snapshot.main","mode":"managed","type":"aws_redshiftserverless_snapshot","name":"main","provider_config_key":"aws","expressions":{"namespace_name":{"references":["aws_redshiftserverless_namespace.main.namespace_name","aws_redshiftserverless_namespace.main"]},"retention_period":{"constant_value":7},"snapshot_name":{"references":["var.namespace_name"]}},"schema_version":0},{"address":"aws_redshiftserverless_workgroup.main","mode":"managed","type":"aws_redshiftserverless_workgroup","name":"main","provider_config_key":"aws","expressions":{"base_capacity":{"constant_value":16},"config_parameter":[{"parameter_key":{"constant_value":"enable_user_activity_logging"},"parameter_value":{"constant_value":"true"}},{"parameter_key":{"constant_value":"query_group"},"parameter_value":{"constant_value":"default"}},{"parameter_key":{"constant_value":"max_query_execution_time"},"parameter_value":{"constant_value":"86400000"}},{"parameter_key":{"constant_value":"max_query_queue_time"},"parameter_value":{"constant_value":"3600000"}},{"parameter_key":{"constant_value":"require_ssl"},"parameter_value":{"constant_value":"true"}}],"enhanced_vpc_routing":{"constant_value":true},"namespace_name":{"references":["aws_redshiftserverless_namespace.main.id","aws_redshiftserverless_namespace.main"]},"publicly_accessible":{"constant_value":false},"security_group_ids":{"references":["var.security_group_id"]},"subnet_ids":{"references":["var.subnet_id"]},"tags":{"references":["var.tags"]},"workgroup_name":{"constant_value":"main-workgroup"}},"schema_version":0},{"address":"data.aws_secretsmanager_secret_version.admin_credentials","mode":"data","type":"aws_secretsmanager_secret_version","name":"admin_credentials","provider_config_key":"aws","expressions":{"secret_id":{"references":["var.admin_secret_arn"]}},"schema_version":0}],"variables":{"admin_secret_arn":{"description":"ARN of the secret containing admin credentials"},"kms_key_arn":{"description":"ARN of KMS key for encryption"},"max_capacity":{"default":64,"description":"Maximum capacity of Redshift Serverless in RPUs"},"namespace_name":{"default":"dwh","description":"Name for the Redshift Serverless namespace"},"security_group_id":{"description":"Security group ID for Redshift Serverless"},"subnet_id":{"description":"Subnet ID for Redshift Serverless"},"tags":{"description":"Default tags to apply to all resources."},"workgroup_name":{"default":"dwh-rds","description":"Name for the Redshift Serverless workgroup"}}}},"security":{"source":"./security","expressions":{"db1_host":{"references":["var.db1_host"]},"db1_password":{"references":["var.db1_password"]},"db1_username":{"references":["var.db1_username"]},"db2_host":{"references":["var.db2_host"]},"db2_password":{"references":["var.db2_password"]},"db2_username":{"references":["var.db2_username"]},"tags":{"references":["var.tags"]},"vpc_cidr":{"constant_value":"10.0.0.0/16"},"vpc_id":{"references":["module.networking.vpc_id","module.networking"]}},"module":{"outputs":{"glue_security_group_id":{"expression":{"references":["aws_security_group.glue.id","aws_security_group.glue"]},"description":"ID del grupo de seguridad para Glue"},"logs_kms_key_arn":{"expression":{"references":["aws_kms_key.logs.arn","aws_kms_key.logs"]},"description":"ARN de la clave KMS para logs"},"redshift_admin_secret_arn":{"expression":{"references":["aws_secretsmanager_secret.redshift_admin.arn","aws_secretsmanager_secret.redshift_admin"]},"description":"ARN del secret para el admin de Redshift"},"redshift_admin_secret_version":{"expression":{"references":["aws_secretsmanager_secret_version.redshift_admin.version_id","aws_secretsmanager_secret_version.redshift_admin"]},"description":"Latest version of the Redshift admin credentials"},"redshift_kms_key_arn":{"expression":{"references":["aws_kms_key.redshift.arn","aws_kms_key.redshift"]},"description":"ARN de la clave KMS para Redshift"}},"resources":[{"address":"aws_iam_user.infra_admin","mode":"managed","type":"aws_iam_user","name":"infra_admin","provider_config_key":"aws","expressions":{"name":{"constant_value":"infra_admin"}},"schema_version":0},{"address":"aws_iam_user_policy_attachment.infra_admin_admin_policy","mode":"managed","type":"aws_iam_user_policy_attachment","name":"infra_admin_admin_policy","provider_config_key":"aws","expressions":{"policy_arn":{"constant_value":"arn:aws:iam::aws:policy/AdministratorAccess"},"user":{"references":["aws_iam_user.infra_admin.name","aws_iam_user.infra_admin"]}},"schema_version":0},{"address":"aws_kms_alias.logs","mode":"managed","type":"aws_kms_alias","name":"logs","provider_config_key":"aws","expressions":{"name":{"constant_value":"alias/logs-key"},"target_key_id":{"references":["aws_kms_key.logs.key_id","aws_kms_key.logs"]}},"schema_version":0},{"address":"aws_kms_alias.redshift","mode":"managed","type":"aws_kms_alias","name":"redshift","provider_config_key":"aws","expressions":{"name":{"constant_value":"alias/redshift-key"},"target_key_id":{"references":["aws_kms_key.redshift.key_id","aws_kms_key.redshift"]}},"schema_version":0},{"address":"aws_kms_key.logs","mode":"managed","type":"aws_kms_key","name":"logs","provider_config_key":"aws","expressions":{"deletion_window_in_days":{"references":["var.deletion_window_in_days"]},"description":{"constant_value":"KMS key for CloudWatch Logs encryption"},"enable_key_rotation":{"constant_value":true},"policy":{"references":["aws_iam_user.infra_admin.arn","aws_iam_user.infra_admin"]},"tags":{"references":["var.tags"]}},"schema_version":0},{"address":"aws_kms_key.redshift","mode":"managed","type":"aws_kms_key","name":"redshift","provider_config_key":"aws","expressions":{"deletion_window_in_days":{"references":["var.deletion_window_in_days"]},"description":{"constant_value":"KMS key for Redshift encryption"},"enable_key_rotation":{"constant_value":true},"policy":{"references":["aws_iam_user.infra_admin.arn","aws_iam_user.infra_admin"]},"tags":{"references":["var.tags"]}},"schema_version":0},{"address":"aws_secretsmanager_secret.db1_credentials","mode":"managed","type":"aws_secretsmanager_secret","name":"db1_credentials","provider_config_key":"aws","expressions":{"description":{"constant_value":"Credenciales para la base de datos DB1"},"name":{"constant_value":"db1-credentials"},"tags":{"references":["var.tags"]}},"schema_version":0},{"address":"aws_secretsmanager_secret.db2_credentials","mode":"managed","type":"aws_secretsmanager_secret","name":"db2_credentials","provider_config_key":"aws","expressions":{"description":{"constant_value":"Credenciales para la base de datos DB2"},"name":{"constant_value":"db2-credentials"},"tags":{"references":["var.tags"]}},"schema_version":0},{"address":"aws_secretsmanager_secret.redshift_admin","mode":"managed","type":"aws_secretsmanager_secret","name":"redshift_admin","provider_config_key":"aws","expressions":{"kms_key_id":{"references":["aws_kms_key.redshift.arn","aws_kms_key.redshift"]},"name":{"constant_value":"redshift-admin-credentials"},"recovery_window_in_days":{"constant_value":0},"tags":{"references":["var.tags"]}},"schema_version":0},{"address":"aws_secretsmanager_secret_version.db1_credentials","mode":"managed","type":"aws_secretsmanager_secret_version","name":"db1_credentials","provider_config_key":"aws","expressions":{"secret_id":{"references":["aws_secretsmanager_secret.db1_credentials.id","aws_secretsmanager_secret.db1_credentials"]},"secret_string":{"references":["var.db1_username","var.db1_password","var.db1_host"]}},"schema_version":0},{"address":"aws_secretsmanager_secret_version.db2_credentials","mode":"managed","type":"aws_secretsmanager_secret_version","name":"db2_credentials","provider_config_key":"aws","expressions":{"secret_id":{"references":["aws_secretsmanager_secret.db2_credentials.id","aws_secretsmanager_secret.db2_credentials"]},"secret_string":{"references":["var.db2_username","var.db2_password","var.db2_host"]}},"schema_version":0},{"address":"aws_secretsmanager_secret_version.redshift_admin","mode":"managed","type":"aws_secretsmanager_secret_version","name":"redshift_admin","provider_config_key":"aws","expressions":{"secret_id":{"references":["aws_secretsmanager_secret.redshift_admin.id","aws_secretsmanager_secret.redshift_admin"]},"secret_string":{"references":["var.redshift_admin_username","random_password.redshift_password.result","random_password.redshift_password"]}},"schema_version":0},{"address":"aws_security_group.glue","mode":"managed","type":"aws_security_group","name":"glue","provider_config_key":"aws","expressions":{"description":{"constant_value":"Security group for AWS Glue"},"egress":{"references":["var.vpc_cidr"]},"ingress":{"references":["var.vpc_cidr"]},"name":{"constant_value":"glue-security-group"},"tags":{"references":["var.tags"]},"vpc_id":{"references":["var.vpc_id"]}},"schema_version":1},{"address":"random_password.redshift_password","mode":"managed","type":"random_password","name":"redshift_password","provider_config_key":"module.security:random","expressions":{"length":{"constant_value":16},"override_special":{"constant_value":"!#$%\u0026*()-_=+[]{}\u003c\u003e:?"},"special":{"constant_value":true}},"schema_version":3}],"variables":{"db1_host":{},"db1_password":{},"db1_username":{},"db2_host":{},"db2_password":{},"db2_username":{},"deletion_window_in_days":{"default":7,"description":"Number of days to wait before deleting a KMS key"},"redshift_admin_username":{"default":"admin","description":"Username for Redshift admin"},"tags":{"description":"Default tags to apply to all resources."},"vpc_cidr":{"description":"CIDR block of the VPC"},"vpc_id":{"description":"ID of the VPC"}}}},"staging":{"source":"./staging","expressions":{"environment":{"references":["var.environment"]},"glue_crawler_name":{"references":["var.glue_crawler_name"]},"glue_job_name":{"references":["var.glue_job_name"]},"kms_key_arn":{"references":["module.security.logs_kms_key_arn","module.security"]},"staging_bucket":{"references":["var.staging_bucket_name"]},"tags":{"references":["var.tags"]}},"module":{"outputs":{"bucket_arn":{"expression":{"references":["aws_s3_bucket.main.arn","aws_s3_bucket.main"]}},"bucket_name":{"expression":{"references":["aws_s3_bucket.main.id","aws_s3_bucket.main"]}},"staging_bucket_arn":{"expression":{"references":["aws_s3_bucket.main.arn","aws_s3_bucket.main"]},"description":"ARN of the staging S3 bucket"},"step_functions_arn":{"expression":{"references":["aws_sfn_state_machine.etl_orchestration.arn","aws_sfn_state_machine.etl_orchestration"]},"description":"ARN of the Step Functions state machine"}},"resources":[{"address":"aws_cloudwatch_metric_alarm.s3_objects","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"s3_objects","provider_config_key":"aws","expressions":{"alarm_actions":{"references":["aws_sns_topic.alerts.arn","aws_sns_topic.alerts"]},"alarm_description":{"constant_value":"Alarma cuando el número de objetos en el bucket de staging excede 100,000"},"alarm_name":{"constant_value":"staging-bucket-objects"},"comparison_operator":{"constant_value":"GreaterThanThreshold"},"dimensions":{"references":["aws_s3_bucket.main.bucket","aws_s3_bucket.main"]},"evaluation_periods":{"constant_value":"1"},"metric_name":{"constant_value":"NumberOfObjects"},"namespace":{"constant_value":"AWS/S3"},"ok_actions":{"references":["aws_sns_topic.alerts.arn","aws_sns_topic.alerts"]},"period":{"constant_value":"86400"},"statistic":{"constant_value":"Average"},"tags":{"references":["var.tags"]},"threshold":{"constant_value":"100000"}},"schema_version":1},{"address":"aws_cloudwatch_metric_alarm.s3_size","mode":"managed","type":"aws_cloudwatch_metric_alarm","name":"s3_size","provider_config_key":"aws","expressions":{"alarm_actions":{"references":["aws_sns_topic.alerts.arn","aws_sns_topic.alerts"]},"alarm_description":{"constant_value":"Alarma cuando el tamaño del bucket de staging excede 10 GB"},"alarm_name":{"constant_value":"staging-bucket-size"},"comparison_operator":{"constant_value":"GreaterThanThreshold"},"dimensions":{"references":["aws_s3_bucket.main.bucket","aws_s3_bucket.main"]},"evaluation_periods":{"constant_value":"1"},"metric_name":{"constant_value":"BucketSizeBytes"},"namespace":{"constant_value":"AWS/S3"},"ok_actions":{"references":["aws_sns_topic.alerts.arn","aws_sns_topic.alerts"]},"period":{"constant_value":"86400"},"statistic":{"constant_value":"Average"},"tags":{"references":["var.tags"]},"threshold":{"constant_value":"10737418240"}},"schema_version":1},{"address":"aws_iam_role.step_functions","mode":"managed","type":"aws_iam_role","name":"step_functions","provider_config_key":"aws","expressions":{"assume_role_policy":{},"name":{"constant_value":"step-functions-etl-role"},"tags":{"references":["var.tags"]}},"schema_version":0},{"address":"aws_iam_role_policy.step_functions","mode":"managed","type":"aws_iam_role_policy","name":"step_functions","provider_config_key":"aws","expressions":{"name":{"constant_value":"step-functions-etl-policy"},"policy":{"references":["aws_s3_bucket.main.bucket","aws_s3_bucket.main","aws_s3_bucket.main.bucket","aws_s3_bucket.main","aws_sns_topic.alerts.arn","aws_sns_topic.alerts"]},"role":{"references":["aws_iam_role.step_functions.id","aws_iam_role.step_functions"]}},"schema_version":0},{"address":"aws_s3_bucket.main","mode":"managed","type":"aws_s3_bucket","name":"main","provider_config_key":"aws","schema_version":0},{"address":"aws_s3_bucket_lifecycle_configuration.staging","mode":"managed","type":"aws_s3_bucket_lifecycle_configuration","name":"staging","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.main.id","aws_s3_bucket.main"]},"rule":[{"abort_incomplete_multipart_upload":[{"days_after_initiation":{"constant_value":7}}],"expiration":[{"days":{"constant_value":30}}],"filter":[{"prefix":{"constant_value":"staging/"}}],"id":{"constant_value":"retention-policy"},"noncurrent_version_expiration":[{"noncurrent_days":{"constant_value":7}}],"status":{"constant_value":"Enabled"}}]},"schema_version":1},{"address":"aws_s3_bucket_policy.glue_access","mode":"managed","type":"aws_s3_bucket_policy","name":"glue_access","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.main.id","aws_s3_bucket.main"]},"policy":{"references":["aws_s3_bucket.main.arn","aws_s3_bucket.main","aws_s3_bucket.main.arn","aws_s3_bucket.main"]}},"schema_version":0},{"address":"aws_s3_bucket_server_side_encryption_configuration.main","mode":"managed","type":"aws_s3_bucket_server_side_encryption_configuration","name":"main","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.main.id","aws_s3_bucket.main"]},"rule":[{"apply_server_side_encryption_by_default":[{"kms_master_key_id":{"references":["var.kms_key_arn"]},"sse_algorithm":{"constant_value":"aws:kms"}}]}]},"schema_version":0},{"address":"aws_s3_bucket_versioning.main","mode":"managed","type":"aws_s3_bucket_versioning","name":"main","provider_config_key":"aws","expressions":{"bucket":{"references":["aws_s3_bucket.main.id","aws_s3_bucket.main"]},"versioning_configuration":[{"status":{"constant_value":"Enabled"}}]},"schema_version":0},{"address":"aws_sfn_state_machine.etl_orchestration","mode":"managed","type":"aws_sfn_state_machine","name":"etl_orchestration","provider_config_key":"aws","expressions":{"definition":{"references":["aws_s3_bucket.main.bucket","aws_s3_bucket.main","var.glue_job_name","aws_s3_bucket.main.bucket","aws_s3_bucket.main","var.glue_crawler_name","var.glue_job_name","aws_s3_bucket.main.bucket","aws_s3_bucket.main","var.glue_crawler_name","aws_sns_topic.alerts.arn","aws_sns_topic.alerts"]},"name":{"constant_value":"etl-orchestration"},"role_arn":{"references":["aws_iam_role.step_functions.arn","aws_iam_role.step_functions"]},"tags":{"references":["var.tags"]}},"schema_version":0},{"address":"aws_sns_topic.alerts","mode":"managed","type":"aws_sns_topic","name":"alerts","provider_config_key":"aws","expressions":{"kms_master_key_id":{"references":["var.kms_key_arn"]},"name":{"constant_value":"staging-alerts"},"tags":{"references":["var.tags"]}},"schema_version":0},{"address":"random_string.bucket_suffix","mode":"managed","type":"random_string","name":"bucket_suffix","provider_config_key":"module.staging:random","expressions":{"length":{"constant_value":8},"special":{"constant_value":false},"upper":{"constant_value":false}},"schema_version":2}],"variables":{"environment":{"description":"Nombre del ambiente (dev, prod, etc.)"},"glue_crawler_name":{"description":"Nombre del crawler de Glue"},"glue_job_name":{"description":"Nombre del job de Glue"},"kms_key_arn":{"description":"ARN de la clave KMS para encriptación"},"staging_bucket":{"description":"Nombre del bucket de staging"},"tags":{"description":"Tags comunes para todos los recursos"}}},"depends_on":["module.security"]}},"variables":{"customer_gateway_ip":{"default":"1.2.3.4","description":"IP address of the customer gateway"},"db1_host":{"description":"Host for database 1"},"db1_password":{"description":"Password for database 1","sensitive":true},"db1_username":{"description":"Username for database 1","sensitive":true},"db2_host":{"description":"Host for database 2"},"db2_password":{"description":"Password for database 2","sensitive":true},"db2_username":{"description":"Username for database 2","sensitive":true},"environment":{"default":"dev","description":"Environment name (e.g., dev, prod)"},"glue_crawler_name":{"default":"crawler-db1"},"glue_job_name":{"default":"etl_job"},"staging_bucket_name":{"default":"mvp-staging-bucket"},"tags":{"default":{"Environment":"dev","Terraform":"true"},"description":"Default tags to apply to all resources."}}}},"relevant_attributes":[{"resource":"module.security.aws_secretsmanager_secret.db1_credentials","attribute":["id"]},{"resource":"module.glue.aws_iam_role.glue_role","attribute":["id"]},{"resource":"module.security.random_password.redshift_password","attribute":["result"]},{"resource":"module.glue.data.aws_secretsmanager_secret_version.db2_credentials","attribute":["secret_string"]},{"resource":"module.glue.aws_iam_role.glue_role","attribute":["name"]},{"resource":"module.glue.aws_glue_connection.db1","attribute":["name"]},{"resource":"module.staging.aws_s3_bucket.main","attribute":["id"]},{"resource":"module.staging.aws_sns_topic.alerts","attribute":["arn"]},{"resource":"module.glue.aws_glue_connection.redshift","attribute":["name"]},{"resource":"module.networking.aws_iam_role.vpc_flow_log_role","attribute":["id"]},{"resource":"module.security.aws_kms_key.redshift","attribute":["arn"]},{"resource":"module.glue.aws_iam_role.glue_role","attribute":["arn"]},{"resource":"module.monitoring.aws_cloudwatch_dashboard.main","attribute":["dashboard_name"]},{"resource":"module.networking.aws_security_group.redshift","attribute":["id"]},{"resource":"module.redshift.aws_redshiftserverless_namespace.main","attribute":["namespace_name"]},{"resource":"module.redshift.aws_redshiftserverless_workgroup.main","attribute":["endpoint"]},{"resource":"module.networking.aws_cloudwatch_log_group.flow_log_group","attribute":["arn"]},{"resource":"module.security.aws_secretsmanager_secret.db2_credentials","attribute":["id"]},{"resource":"module.glue.data.aws_subnet.selected","attribute":["availability_zone"]},{"resource":"module.networking.aws_vpn_gateway.main","attribute":["id"]},{"resource":"module.security.aws_secretsmanager_secret.redshift_admin","attribute":["id"]},{"resource":"module.security.aws_kms_key.logs","attribute":["arn"]},{"resource":"module.monitoring.aws_sns_topic.alerts","attribute":["arn"]},{"resource":"module.glue.aws_glue_crawler.main","attribute":["name"]},{"resource":"module.staging.aws_sfn_state_machine.etl_orchestration","attribute":["arn"]},{"resource":"module.networking.aws_route_table.main","attribute":["id"]},{"resource":"module.networking.aws_subnet.main","attribute":["id"]},{"resource":"module.staging.aws_iam_role.step_functions","attribute":["arn"]},{"resource":"module.monitoring.aws_cloudwatch_log_group.glue_logs","attribute":["name"]},{"resource":"module.redshift.aws_redshiftserverless_workgroup.main","attribute":["id"]},{"resource":"module.security.aws_security_group.glue","attribute":["id"]},{"resource":"module.security.aws_iam_user.infra_admin","attribute":["arn"]},{"resource":"module.security.aws_kms_key.redshift","attribute":["key_id"]},{"resource":"module.glue.aws_glue_catalog_database.main","attribute":["name"]},{"resource":"module.staging.aws_s3_bucket.main","attribute":["bucket"]},{"resource":"module.glue.aws_glue_job.main","attribute":["name"]},{"resource":"module.glue.data.aws_secretsmanager_secret_version.db1_credentials","attribute":["secret_string"]},{"resource":"module.monitoring.aws_cloudwatch_log_group.vpc_flow_logs","attribute":["name"]},{"resource":"module.redshift.data.aws_secretsmanager_secret_version.admin_credentials","attribute":["secret_string"]},{"resource":"module.glue.aws_glue_connection.db2","attribute":["name"]},{"resource":"module.networking.aws_vpn_connection.main","attribute":["id"]},{"resource":"module.networking.aws_customer_gateway.main","attribute":["id"]},{"resource":"module.networking.aws_iam_role.vpc_flow_log_role","attribute":["arn"]},{"resource":"module.security.aws_kms_key.logs","attribute":["key_id"]},{"resource":"module.security.aws_secretsmanager_secret.redshift_admin","attribute":["arn"]},{"resource":"module.networking.aws_vpc.vpc","attribute":["id"]},{"resource":"module.security.aws_iam_user.infra_admin","attribute":["name"]},{"resource":"module.security.aws_secretsmanager_secret_version.redshift_admin","attribute":["version_id"]},{"resource":"module.staging.aws_s3_bucket.main","attribute":["arn"]},{"resource":"module.redshift.aws_redshiftserverless_namespace.main","attribute":["id"]},{"resource":"module.staging.aws_iam_role.step_functions","attribute":["id"]}],"timestamp":"2025-04-21T14:31:20Z","applyable":true,"complete":true,"errored":false}
